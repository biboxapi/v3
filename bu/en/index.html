
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bibox API documentation(v3)</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-1df89a6c.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-628c1a7f.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <header>
      <div class="flex_box">
        <img src="images/logo-5720d610.png" class="logo" alt="" />
        <div class="nav_box">
          <span class="nav_cell nav_tab">
            <a href="/v3/spot/zh/" id="btn_spot">现货</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/bu/zh/" id="btn_contract">U本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/bc/zh/" id="btn_contract_coin">币本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="https://biboxcom.github.io/zh-hans/" id="btn_v1">使用v1版本API</a>
          </span>
        </div>
      </div>
      <a href="/v3/spot/en/" class="lang" id="lang_box">English</a>
    </header>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#e08c1d4f9a" class="toc-h2 toc-link" data-title="错误码">错误码</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.bibox.com'>Start trading</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h2 id='1-signature-interface-request-method'>1.Signature interface request method</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.Current timestamp</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.Requested parameters</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.Formatting parameters</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.This is the string that needs to be signed</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.Signed result</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/assets/transfer/cbu</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.Formatting parameters</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.response data</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li><p>1.Get current timestamp</p></li>
<li><p>2.Understand the parameter param required by the interface request, and format the parameter to get strParam</p></li>
<li><p>3.Generate the string strToSign that needs to be signed</p></li>
<li><p>4.Use apikey&#39;s secret to sign the string strToSign that needs to be signed with HmacMD5</p></li>
<li><p>5.When requesting, set the following fields of http headers</p></li>
</ul>

<table><thead>
<tr>
<th>Field name</th>
<th>Field type</th>
<th>Field description</th>
<th>Field value</th>
</tr>
</thead><tbody>
<tr>
<td>content-type</td>
<td>string</td>
<td></td>
<td>&#39;application/json&#39;</td>
</tr>
<tr>
<td>bibox-api-key</td>
<td>string</td>
<td>your apikey</td>
<td></td>
</tr>
<tr>
<td>bibox-timestamp</td>
<td>long</td>
<td>Current timestamp，expressed in milliseconds</td>
<td>timestamp</td>
</tr>
<tr>
<td>bibox-api-sign</td>
<td>string</td>
<td>Signature result</td>
<td>sign</td>
</tr>
</tbody></table>

<ul>
<li><p>6.When requesting, set http body as the formatted request parameter strParam </p></li>
<li><p>7.The return value contains the field state, 0 means success, and other error codes, means failure. Successful results will have a corresponding field result, and failed results will have a corresponding field msg.</p></li>
</ul>
<h2 id='2-fund-transfer'>2.Fund transfer</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.Current timestamp</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.Requested parameters</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.Formatting parameters</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.This is the string that needs to be signed</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//你的 apikey 密码</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.Signed result</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/assets/transfer/cbu</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.Formatting parameters</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.Response data</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/assets/transfer/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>true</td>
<td>string</td>
<td>Number to string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>string</td>
<td>coin symbol</td>
<td></td>
<td>USDT</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>integer</td>
<td>0 transfer in, 1 transfer out</td>
<td></td>
<td>0,1</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"352559634189422592"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='3-place-order'>3.Place order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/open</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_type</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">11500</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_from</span><span class="dl">"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_oid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1234567890</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/open</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>string</td>
<td>Number to string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>Order side, 1 open long, 2 open short, 3 close long, 4 close short</td>
<td></td>
<td>1,2,3,4</td>
</tr>
<tr>
<td>order_type</td>
<td>true</td>
<td>integer</td>
<td>Order type, 1 market order, 2 limit order</td>
<td></td>
<td>1,2</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>string</td>
<td>Order price</td>
<td></td>
<td></td>
</tr>
<tr>
<td>order_from</td>
<td>true</td>
<td>integer</td>
<td>Order source</td>
<td></td>
<td>6</td>
</tr>
<tr>
<td>client_oid</td>
<td>false</td>
<td>string</td>
<td>client order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"425510999949316"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
    </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">waiting</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">fully</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">fully</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">failed</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"open"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>order_id</td>
<td>order id</td>
</tr>
<tr>
<td>client_oid</td>
<td>client order id</td>
</tr>
<tr>
<td>status</td>
<td>Order status 1 waiting to be traded, 2 partly traded, 3 fully traded, 4 partly cancelled, 5 fully cancelled, 100 order failed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='4-cancel-order'>4.Cancel order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/close</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">425510999949316</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/close</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"close"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='5-batch-cancellation'>5.Batch cancellation</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/closeBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">2234567890</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">2234567891</span><span class="dl">"</span><span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/closeBatch</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>Array</td>
<td>Order id array</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"close"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='6-cancel-all-orders'>6.Cancel all orders</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/closeAll</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/closeAll</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"closeAll"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='7-adjust-margin-on-a-fixed-position'>7.Adjust margin on a fixed position</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/changeMargin</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">margin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/changeMargin</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>margin</td>
<td>true</td>
<td>string</td>
<td>margin</td>
<td></td>
<td></td>
</tr>
<tr>
<td>side</td>
<td>true</td>
<td>integer</td>
<td>Position side, 1 long position, 2 short position</td>
<td></td>
<td>1，2</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">3103</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">failed</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"没有持仓不支持该操作"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"changeMargin"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='8-adjust-position-mode-and-leverage'>8.Adjust position mode and leverage</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/changeMode</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage_long</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage_short</span><span class="dl">"</span><span class="p">:</span><span class="mi">20</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/changeMode</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>mode</td>
<td>true</td>
<td>integer</td>
<td>Position mode, 1 cross, 2 fixed</td>
<td></td>
<td>1，2</td>
</tr>
<tr>
<td>leverage_long</td>
<td>true</td>
<td>integer</td>
<td>Long leverage</td>
<td></td>
<td>1~100</td>
</tr>
<tr>
<td>leverage_short</td>
<td>true</td>
<td>integer</td>
<td>Short leverage</td>
<td></td>
<td>1~100</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"changeMode"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='9-query-assets'>9.Query assets</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/assets</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "coin":"USDT",</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/assets</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>coin</td>
<td>false</td>
<td>string</td>
<td>coin symbol</td>
<td></td>
<td>BTC，ETH，...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="err">ff:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">b:</span><span class="w"> </span><span class="err">'</span><span class="mf">219311.9556</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">c:</span><span class="w"> </span><span class="err">'USDT'</span><span class="p">,</span><span class="w">
           </span><span class="err">u:</span><span class="w"> </span><span class="mi">100006</span><span class="p">,</span><span class="w">
           </span><span class="err">mc:</span><span class="w"> </span><span class="err">'</span><span class="mf">93265.8573</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">mf:</span><span class="w"> </span><span class="err">'</span><span class="mf">60.8824</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">fc:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"assets"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>b</td>
<td>Available Balance</td>
</tr>
<tr>
<td>c</td>
<td>coin symbol</td>
</tr>
<tr>
<td>u</td>
<td>user id</td>
</tr>
<tr>
<td>ff</td>
<td>Fixed Position Frozen funds</td>
</tr>
<tr>
<td>fc</td>
<td>Cross Position Frozen funds</td>
</tr>
<tr>
<td>mf</td>
<td>Fixed Position margin</td>
</tr>
<tr>
<td>mc</td>
<td>Cross Position margin</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='10-query-position'>10.Query position</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/position</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "pair":"4BTC_USDT",</span>
    <span class="c1">// "side":1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/position</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>side</td>
<td>false</td>
<td>integer</td>
<td>Position side, 1 long position, 2 short position</td>
<td></td>
<td>1，2</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pt"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//ignore</span><span class="w">
            </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//ignore</span><span class="w">
            </span><span class="nl">"l"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">leverage</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">Long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Short</span><span class="w">
            </span><span class="nl">"pa"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Alert</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//ignore</span><span class="w">
            </span><span class="nl">"pf"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//Liquidation</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"md"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//Position</span><span class="w"> </span><span class="err">mode</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">Cross</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Fixed</span><span class="w">
            </span><span class="nl">"lc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">liquidate</span><span class="w"> </span><span class="err">position</span><span class="w"> </span><span class="err">value</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">pair</span><span class="w">
            </span><span class="nl">"mg"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//margin</span><span class="w">
            </span><span class="nl">"hc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">Contract</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">multiplied</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">value</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//ignore</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="s2">"0"</span><span class="w"> </span><span class="err">//Open</span><span class="w"> </span><span class="err">price</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"position"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>l</td>
<td>leverage</td>
</tr>
<tr>
<td>sd</td>
<td>Position side, 1 Long, 2 Short</td>
</tr>
<tr>
<td>pa</td>
<td>Alert price</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>pf</td>
<td>Liquidation price</td>
</tr>
<tr>
<td>md</td>
<td>Position mode, 1 Cross, 2 Fixed</td>
</tr>
<tr>
<td>lc</td>
<td>Can liquidate position value</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>mg</td>
<td>margin</td>
</tr>
<tr>
<td>hc</td>
<td>Position value = Contract number multiplied by contract value</td>
</tr>
<tr>
<td>po</td>
<td>Open price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='11-query-order-list'>11.Query order list</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/list</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "pair":"4BTC_USDT",</span>
    <span class="c1">// "order_side":1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/list</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>Order side, 1 open long, 2 open short, 3 close long, 4 close short</td>
<td></td>
<td>1,2,3,4</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"p"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"o"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//fee</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">side</span><span class="w">
                </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//pair</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//ignore</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderList"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>eq</td>
<td>Deal amount</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>q</td>
<td>Order quantity</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>r</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>s</td>
<td>Order status</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>fz</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='12-query-order'>12.Query order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/detail</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">426610511577093</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/detail</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//fee</span><span class="w">
        </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
        </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
        </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">price</span><span class="w">
        </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
        </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
        </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">side</span><span class="w">
        </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
        </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
        </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
        </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
        </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
        </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
        </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//pair</span><span class="w">
        </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
        </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
        </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//ignore</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderDetail"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>eq</td>
<td>Deal amount</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>q</td>
<td>Order quantity</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>r</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>s</td>
<td>Order status</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>fz</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='13-batch-query-order'>13. Batch query order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/listBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">426610511577093</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/listBatch</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>Array</td>
<td>Order id array</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//fee</span><span class="w">
            </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
            </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
            </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">side</span><span class="w">
            </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
            </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
            </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//pair</span><span class="w">
            </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//ignore</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderListBatch"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>eq</td>
<td>Deal amount</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>q</td>
<td>Order quantity</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>r</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>s</td>
<td>Order status</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>fz</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='14-query-order-list-based-on-clientoid'>14.Query order list based on clientoid</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/listBatchByClientOid</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">1602679943911</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/listBatchByClientOid</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>Array</td>
<td>Array of client order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//fee</span><span class="w">
            </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
            </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
            </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//Order</span><span class="w"> </span><span class="err">side</span><span class="w">
            </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
            </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
            </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//pair</span><span class="w">
            </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//ignore</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderListBatchByCLientOid"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>eq</td>
<td>Deal amount</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>q</td>
<td>Order quantity</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>r</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>s</td>
<td>Order status</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>fz</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='15-get-server-time'>15.Get server time</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3/cbu/timestamp</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1602680518605"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>server time</td>
</tr>
</tbody></table>
<h2 id='16-qeury-position-holding-changed-records'>16.Qeury position holding changed records</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_coin/dealLog</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_coin/dealLog</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>page number</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>10,20, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842635654"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">coin</span><span class="w"> </span><span class="err">symbol</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">Long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Short</span><span class="w">
                </span><span class="nl">"model"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">model</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="err">Cross</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="err">Fixed</span><span class="w">
                </span><span class="nl">"log_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Record</span><span class="w"> </span><span class="err">type</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">lighten</span><span class="w"> </span><span class="err">position</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">reduce</span><span class="w"> </span><span class="err">risk</span><span class="w"> </span><span class="err">level</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">liquidate</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="err">ADL</span><span class="w">
                </span><span class="nl">"hold_coin_dx"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Change</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">position</span><span class="w">
                </span><span class="nl">"hold_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">holding</span><span class="w">
                </span><span class="nl">"price_log"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">proposed</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_open"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">profit</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>record id</td>
</tr>
<tr>
<td>user_id</td>
<td>user id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>side</td>
<td>Position side, 1 Long, 2 Short</td>
</tr>
<tr>
<td>model</td>
<td>Position model, 1Cross, 2Fixed</td>
</tr>
<tr>
<td>log_type</td>
<td>Record type, 1 open position, 2 close position, 3 lighten position to reduce risk level, 4 liquidate position, 5ADL</td>
</tr>
<tr>
<td>hold_coin_dx</td>
<td>Change in position</td>
</tr>
<tr>
<td>hold_coin</td>
<td>Position holding</td>
</tr>
<tr>
<td>price_log</td>
<td>proposed price</td>
</tr>
<tr>
<td>price_open</td>
<td>Average open price</td>
</tr>
<tr>
<td>profit</td>
<td>profit</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>fee_bix</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='17-query-order-deals-detail'>17.Query order deals detail</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_coin/orderDetail</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">orderId</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">421112953438213</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_coin/orderDetail</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>true</td>
<td>long</td>
<td>order id</td>
<td></td>
<td></td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>page number</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>10,20, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842635651"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">coin</span><span class="w"> </span><span class="err">symbol</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">source</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"10692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"11510.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000608"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">maker</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T02:58:59.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>record id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>side</td>
<td>Pending order side, 1 open long, 2 open short, 3 close long, 4 close short</td>
</tr>
<tr>
<td>order_from</td>
<td>Order source</td>
</tr>
<tr>
<td>price</td>
<td>Pending order price</td>
</tr>
<tr>
<td>deal_price</td>
<td>Deal price</td>
</tr>
<tr>
<td>deal_coin</td>
<td>Deal amount</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>fee_bix</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>is_maker</td>
<td>is maker</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='18-query-historical-orders'>18.Query historical orders</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_coin/orderHistory</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_coin/orderHistory</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>Contract symbol</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>page number</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>10,20, ...</td>
</tr>
<tr>
<td>side</td>
<td>false</td>
<td>integer</td>
<td>Order side, 1 open long 2 open short 3 close long 4 close short</td>
<td></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>false</td>
<td>Array</td>
<td>Order status, 1 uncompleted, 2 partially completed, 3 completely completed, 4 partially cancelled, 5 completely cancelled, 100 failed to place an order</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">421112953438215</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">coin</span><span class="w"> </span><span class="err">symbol</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">type</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">price</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"amount_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
                </span><span class="nl">"deal_num"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">number</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">status</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">uncompleted</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partially</span><span class="w"> </span><span class="err">completed</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">completed</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partially</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">failed</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">place</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">order</span><span class="w">
                </span><span class="nl">"reason"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Reason</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">failure</span><span class="w">
                </span><span class="nl">"fee_rate_maker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">maker</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">rate</span><span class="w">
                </span><span class="nl">"fee_rate_taker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">taker</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">rate</span><span class="w">
                </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="mi">1602644402806</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">created</span><span class="w"> </span><span class="err">time</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">updated</span><span class="w"> </span><span class="err">time</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>user_id</td>
<td>user id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>side</td>
<td>Pending order side, 1 open long, 2 open short, 3 close long, 4 close short</td>
</tr>
<tr>
<td>order_type</td>
<td>Order type, 1 market price, 2 limit price</td>
</tr>
<tr>
<td>price</td>
<td>Pending order price</td>
</tr>
<tr>
<td>amount_coin</td>
<td>Order quantity</td>
</tr>
<tr>
<td>freeze</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>price_deal</td>
<td>Average deal price</td>
</tr>
<tr>
<td>deal_coin</td>
<td>Deal amount</td>
</tr>
<tr>
<td>deal_num</td>
<td>Deal number</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>fee_bix</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>status</td>
<td>Order status, 1 uncompleted, 2 partially completed, 3 completely completed, 4 partially cancelled, 5 completely cancelled, 100 failed to place an order</td>
</tr>
<tr>
<td>reason</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>fee_rate_maker</td>
<td>maker fee rate</td>
</tr>
<tr>
<td>fee_rate_taker</td>
<td>taker fee rate</td>
</tr>
<tr>
<td>client_oid</td>
<td>client order id</td>
</tr>
<tr>
<td>order_from</td>
<td>Order source</td>
</tr>
<tr>
<td>createdAt</td>
<td>created time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='19-query-order'>19.Query order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_coin/orderById</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">orderIds</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">421112953438213</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">421112953438214</span><span class="dl">"</span><span class="p">],</span>
    <span class="dl">"</span><span class="s2">clientOids</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">1602644402806</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1602644402811</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_coin/orderById</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>orderIds</td>
<td>true</td>
<td>Array</td>
<td>Order id array</td>
<td></td>
<td></td>
</tr>
<tr>
<td>clientOids</td>
<td>true</td>
<td>Array</td>
<td>Array of client order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">421112953438214</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">coin</span><span class="w"> </span><span class="err">symbol</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">pair</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">short</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">type</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">price</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"amount_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">amount</span><span class="w">
            </span><span class="nl">"deal_num"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Deal</span><span class="w"> </span><span class="err">number</span><span class="w">
            </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
            </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">status</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">uncompleted</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partially</span><span class="w"> </span><span class="err">completed</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">completed</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partially</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">cancelled</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">failed</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">place</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">order</span><span class="w">
            </span><span class="nl">"reason"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Reason</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">failure</span><span class="w">
            </span><span class="nl">"fee_rate_maker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">maker</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">rate</span><span class="w">
            </span><span class="nl">"fee_rate_taker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">taker</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">rate</span><span class="w">
            </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="mi">1602644402806</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">created</span><span class="w"> </span><span class="err">time</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">updated</span><span class="w"> </span><span class="err">time</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>user_id</td>
<td>user id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>side</td>
<td>Pending order side, 1 open long, 2 open short, 3 close long, 4 close short</td>
</tr>
<tr>
<td>order_type</td>
<td>Order type, 1 market price, 2 limit price</td>
</tr>
<tr>
<td>price</td>
<td>Pending order price</td>
</tr>
<tr>
<td>amount_coin</td>
<td>Order quantity</td>
</tr>
<tr>
<td>freeze</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>price_deal</td>
<td>Average deal price</td>
</tr>
<tr>
<td>deal_coin</td>
<td>Deal amount</td>
</tr>
<tr>
<td>deal_num</td>
<td>Deal number</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>fee_bix</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>status</td>
<td>Order status, 1 uncompleted, 2 partially completed, 3 completely completed, 4 partially cancelled, 5 completely cancelled, 100 failed to place an order</td>
</tr>
<tr>
<td>reason</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>fee_rate_maker</td>
<td>maker fee rate</td>
</tr>
<tr>
<td>fee_rate_taker</td>
<td>taker fee rate</td>
</tr>
<tr>
<td>client_oid</td>
<td>client order id</td>
</tr>
<tr>
<td>order_from</td>
<td>Order source</td>
</tr>
<tr>
<td>createdAt</td>
<td>created time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='20-qeury-fund-fee-rate'>20.Qeury fund fee rate</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buFundRate</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fund_rate"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T00:00:00.000Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"4ETH_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fund_rate"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T00:00:00.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>fund_rate</td>
<td>fund fee rate</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='21-qeury-tag-price'>21.Qeury tag price</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buTagPrice</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="err">//pair</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"11453.7224909000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Index</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"priceTag"</span><span class="p">:</span><span class="s2">"11454.2951770245"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Tag</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:41:08.000Z"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"4ETH_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"383.1999999600"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priceTag"</span><span class="p">:</span><span class="s2">"383.2191599600"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:41:08.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>result</td>
<td>The keyword is pair</td>
</tr>
<tr>
<td>close</td>
<td>Index price</td>
</tr>
<tr>
<td>priceTag</td>
<td>Tag price</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='22-query-basic-contract-information'>22.Query basic contract information</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buValue</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">304</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_init"</span><span class="p">:</span><span class="s2">"10.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_min"</span><span class="p">:</span><span class="s2">"0.0100000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_max"</span><span class="p">:</span><span class="s2">"150.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_level_base"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_level_dx"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maker_fee"</span><span class="p">:</span><span class="s2">"0.0002000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"taker_fee"</span><span class="p">:</span><span class="s2">"0.0005500000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open_max_per"</span><span class="p">:</span><span class="s2">"100.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pending_max"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hold_max"</span><span class="p">:</span><span class="s2">"100.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_precision"</span><span class="p">:</span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>leverage_min</td>
<td>Minimum leverage</td>
</tr>
<tr>
<td>leverage_max</td>
<td>Maximum leverage</td>
</tr>
<tr>
<td>value</td>
<td>contract value</td>
</tr>
<tr>
<td>maker_fee</td>
<td>default maker fee rate</td>
</tr>
<tr>
<td>taker_fee</td>
<td>default taker fee rate</td>
</tr>
<tr>
<td>open_max_per</td>
<td>Maximum number of single pending orders</td>
</tr>
<tr>
<td>pending_max</td>
<td>Maximum number of pending orders</td>
</tr>
<tr>
<td>hold_max</td>
<td>Maximum position value</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='23-query-accuracy-configuration'>23.Query accuracy configuration</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buUnit</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//pair</span><span class="w">
            </span><span class="nl">"price_unit"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//Decimal</span><span class="w"> </span><span class="err">points</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">order</span><span class="w">
            </span><span class="nl">"vol_unit"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
            </span><span class="nl">"value_unit"</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ignore</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>price_unit</td>
<td>Decimal points for order</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='24-query-kline'>24.Query Kline</h2>
<ul>
<li><p>1.Request path</p></li>
<li><p>GET https://api.bibox.com/v2/mdata/kline?pair=4BTC_USDT&amp;period=1min&amp;size=10</p></li>
<li><p>2.Request parameter</p></li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>k-line period</td>
<td></td>
<td>&#39;1min&#39;, &#39;3min&#39;, &#39;5min&#39;, &#39;15min&#39;, &#39;30min&#39;, &#39;1hour&#39;, &#39;2hour&#39;, &#39;4hour&#39;, &#39;6hour&#39;, &#39;12hour&#39;, &#39;day&#39;, &#39;week&#39;</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>size</td>
<td>1000</td>
<td>1-1000</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1602680580000</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Timestamp</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Opening</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Highest</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Lowest</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Closing</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="err">//</span><span class="w"> </span><span class="err">Volume</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"kline"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>Value means success, otherwise means failure</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp</td>
</tr>
<tr>
<td>open</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>Closing price</td>
</tr>
<tr>
<td>vol</td>
<td>Volume</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='25-query-market-depth'>25.Query market depth</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v2/mdata/depth?pair=4BTC_USDT&amp;size=10</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>size</td>
<td>200</td>
<td>1-200</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1602669350668</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="err">//Seller</span><span class="w"> </span><span class="err">Depth</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">Market</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="err">//Buyer</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">depth</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54054"</span><span class="p">,</span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"10666"</span><span class="err">//Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>Value means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>update_time</td>
<td>time</td>
</tr>
<tr>
<td>asks</td>
<td>Seller Depth of Market</td>
</tr>
<tr>
<td>bids</td>
<td>Buyer market depth</td>
</tr>
<tr>
<td>volume</td>
<td>Order quantity</td>
</tr>
<tr>
<td>price</td>
<td>Pending order price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='26-subscription-to-kline'>26.Subscription to Kline</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_kline_1min</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>k-line period</td>
<td></td>
<td>1min, 5min, 15min, 30min, 1hour, 2hour, 4hour, 6hour, 12hour, day, week</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_kline_&#39; + ${period}</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>8</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_kline_1min"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603969980000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"43045.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970040000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.70000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"5561.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>k-line start time</td>
</tr>
<tr>
<td>count</td>
<td>Deal number</td>
</tr>
<tr>
<td>open</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>Closing price</td>
</tr>
<tr>
<td>vol</td>
<td>Volume(Contract value)</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='27-subscription-to-tag-price'>27.Subscription to Tag price</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDTTAGPRICE_kline_1min</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;TAGPRICE_kline_1min&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>8</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDTTAGPRICE_kline_1min"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970520000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13153.34453367"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13153.34453367"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13151.07785535"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13151.13533507"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"30.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970580000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13150.75301752"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13150.75301752"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13149.51581987"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13149.51581987"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"5.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>k-line start time</td>
</tr>
<tr>
<td>count</td>
<td>Deal number</td>
</tr>
<tr>
<td>open</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>Latest price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='28-subscription-to-market-depth'>28.Subscription to Market depth</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_depth</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// depth</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_depth_&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>3</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1604021669643</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seq"</span><span class="p">:</span><span class="mi">4544162</span><span class="p">,</span><span class="w">
    </span><span class="nl">"add"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"del"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"mod"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.4"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"17012"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.3"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>update_time</td>
<td>time</td>
</tr>
<tr>
<td>seq</td>
<td>pair</td>
</tr>
<tr>
<td>add</td>
<td>add data</td>
</tr>
<tr>
<td>del</td>
<td>delete data</td>
</tr>
<tr>
<td>mod</td>
<td>modify data</td>
</tr>
<tr>
<td>asks</td>
<td>ask data</td>
</tr>
<tr>
<td>bids</td>
<td>bid data</td>
</tr>
<tr>
<td>volume</td>
<td>Order quantity</td>
</tr>
<tr>
<td>price</td>
<td>price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='29-subscription-to-deals-detail'>29.Subscription to deals detail</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_deals</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_deals&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13570.600000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"800.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604022129044</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>price</td>
<td>Deal price</td>
</tr>
<tr>
<td>amount</td>
<td>Deal amount</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp</td>
</tr>
<tr>
<td>side</td>
<td>trade side, 1 buy, 2 sell</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='30-subscription-to-ticker'>30.Subscription to ticker</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_ticker</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_ticker&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_ticker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"13593.50"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_cny"</span><span class="p">:</span><span class="s2">"91076.20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13700.300000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"12986.000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="s2">"48375"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell"</span><span class="p">:</span><span class="s2">"13593.6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="s2">"56625"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"155811681.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+2.44%"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1604022393028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_last_cny"</span><span class="p">:</span><span class="s2">"91076.20000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>last</td>
<td>last price</td>
</tr>
<tr>
<td>last_cny</td>
<td>last cny price</td>
</tr>
<tr>
<td>last_usd</td>
<td>last usd price</td>
</tr>
<tr>
<td>high</td>
<td>24hHighest price</td>
</tr>
<tr>
<td>low</td>
<td>24hLowest price</td>
</tr>
<tr>
<td>buy</td>
<td>Latest bid price</td>
</tr>
<tr>
<td>buy_amount</td>
<td>Latest bid amount</td>
</tr>
<tr>
<td>sell</td>
<td>Latest ask price</td>
</tr>
<tr>
<td>sell_amount</td>
<td>Latest ask amount</td>
</tr>
<tr>
<td>vol</td>
<td>24hDeal amount</td>
</tr>
<tr>
<td>percent</td>
<td>24h Quote change</td>
</tr>
<tr>
<td>timestamp</td>
<td>Timestamp</td>
</tr>
<tr>
<td>base_last_cny</td>
<td>Latest cny price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='31-subscription-to-user-data'>31.Subscription to user data</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 1.Request path</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// your apikey</span>
<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// Define the parameter object param, need to use apikey</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// Format the parameter object param, get strParam</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strParam</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// Use apikey's secret to sign strParam with HmacMD5, and get the signature result sign</span>
<span class="kd">let</span> <span class="nx">wsparam</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// 2.Request parameter</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">sign</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
<span class="p">};</span>


<span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>

    <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span> <span class="o">&amp;&amp;</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">manu ping</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">wsparam</span><span class="p">));</span>

    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">incoming</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// response data</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jdata</span><span class="p">.</span><span class="nx">ping</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">init</span><span class="p">();</span>


</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>true</td>
<td>string</td>
<td>your apikey</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>string</td>
<td>sign</td>
<td></td>
<td></td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_login&#39;</td>
</tr>
</tbody></table>

<ul>
<li>3.Signature method</li>
</ul>

<p>1.Define the parameter object param, need to use apikey</p>

<p>let apikey = &#39;thisisyourapikey&#39;; </p>

<p>let param = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;
   };</p>

<p>2.Format the parameter object param, get strParam</p>

<p>let strParam = JSON.stringify(param);</p>

<p>3.Use apikey&#39;s secret to sign strParam with HmacMD5, and get the signature result sign</p>

<p>let CryptoJS = require(&quot;crypto-js&quot;);</p>

<p>let secret = &#39;c708ac3e70d115ec29efbee197330627d7edf842&#39;;</p>

<p>let sign = CryptoJS.HmacMD5(strParam, secret).toString();  </p>

<p>4.Generate subscription parameters wsparam</p>

<p>let wsparam = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;,
      &quot;sign&quot;: sign,
    };</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"订阅成功"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>4.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>&quot;订阅成功&quot; means subscription success</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='32-get-assets-from-subscribed-user-data'>32.Get assets from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_assets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_assets"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"ff"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"b"</span><span class="p">:</span><span class="s2">"218884.3026"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"u"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mc"</span><span class="p">:</span><span class="s2">"93265.8573"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mf"</span><span class="p">:</span><span class="s2">"486.3048"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fc"</span><span class="p">:</span><span class="s2">"0"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>b</td>
<td>Available Balance</td>
</tr>
<tr>
<td>c</td>
<td>coin symbol</td>
</tr>
<tr>
<td>u</td>
<td>user id</td>
</tr>
<tr>
<td>ff</td>
<td>Fixed Position Frozen funds</td>
</tr>
<tr>
<td>fc</td>
<td>Cross Position Frozen funds</td>
</tr>
<tr>
<td>mf</td>
<td>Fixed Position margin</td>
</tr>
<tr>
<td>mc</td>
<td>Cross Position margin</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='33-get-position-from-subscribed-user-data'>33.Get position from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_order</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_order"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"pt"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"l"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pa"</span><span class="p">:</span><span class="s2">"1.0006153088"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pf"</span><span class="p">:</span><span class="s2">"1.0006148393"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"md"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"lc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mg"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"hc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="s2">"0"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>l</td>
<td>leverage</td>
</tr>
<tr>
<td>sd</td>
<td>Position side, 1 Long, 2 Short</td>
</tr>
<tr>
<td>pa</td>
<td>Alert price</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>pf</td>
<td>Liquidation price</td>
</tr>
<tr>
<td>md</td>
<td>Position mode, 1 Cross, 2 Fixed</td>
</tr>
<tr>
<td>lc</td>
<td>Can liquidate position value</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>mg</td>
<td>margin</td>
</tr>
<tr>
<td>hc</td>
<td>Position value = Contract number multiplied by contract value</td>
</tr>
<tr>
<td>po</td>
<td>Open price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='34-get-order-from-subscribed-user-data'>34.Get order from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_pending</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_pending"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11692"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602750121093</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000086786"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"432108069716000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602750117690"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>eq</td>
<td>Deal amount</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>q</td>
<td>Order quantity</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>r</td>
<td>Reason for failure</td>
</tr>
<tr>
<td>s</td>
<td>Order status</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>fz</td>
<td>Frozen funds</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='35-get-deals-detail-from-subscribed-user-data'>35.Get deals detail from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_detail</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_detail"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"432108069715999"</span><span class="p">,</span><span class="err">//Order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="s2">"100006"</span><span class="p">,</span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842648855"</span><span class="p">,</span><span class="err">//deals</span><span class="w"> </span><span class="err">detail</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602750117684"</span><span class="p">,</span><span class="err">//client</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//pair</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w">
                </span><span class="nl">"ot"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">source</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11692"</span><span class="p">,</span><span class="err">//Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"10655"</span><span class="p">,</span><span class="err">//Deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"ep"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0.0000000657"</span><span class="p">,</span><span class="err">//fee</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//BIX</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//Coupon</span><span class="w"> </span><span class="err">deduction</span><span class="w">
                </span><span class="nl">"im"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//is</span><span class="w"> </span><span class="err">maker</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602750121093</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oi</td>
<td>order id</td>
</tr>
<tr>
<td>ui</td>
<td>user id</td>
</tr>
<tr>
<td>id</td>
<td>record id</td>
</tr>
<tr>
<td>coi</td>
<td>Client order id</td>
</tr>
<tr>
<td>pi</td>
<td>pair</td>
</tr>
<tr>
<td>sd</td>
<td>Order side</td>
</tr>
<tr>
<td>of</td>
<td>Order source</td>
</tr>
<tr>
<td>p</td>
<td>Order price</td>
</tr>
<tr>
<td>dp</td>
<td>Deal price</td>
</tr>
<tr>
<td>f</td>
<td>fee</td>
</tr>
<tr>
<td>fb0</td>
<td>Coupon deduction</td>
</tr>
<tr>
<td>fb</td>
<td>BIX deduction</td>
</tr>
<tr>
<td>im</td>
<td>is maker</td>
</tr>
<tr>
<td>t</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='36-get-passive-changes-in-positions-from-subscribed-user-data'>36.Get passive changes in positions from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_deal_log</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_deal_log"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842654296"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//user</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="err">//Change</span><span class="w"> </span><span class="err">type</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">lighten</span><span class="w"> </span><span class="err">position</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">reduce</span><span class="w"> </span><span class="err">risk</span><span class="w"> </span><span class="err">level</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">liquidate</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="err">ADL</span><span class="w">
                </span><span class="nl">"mode"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//Position</span><span class="w"> </span><span class="err">model</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="err">Cross</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="err">Fixed</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//pair</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11247.6"</span><span class="p">,</span><span class="err">//proposed</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"hold_dx"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="err">//Change</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">position</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">side</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="err">Long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="err">Short</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1602755131000</span><span class="p">,</span><span class="w"> </span><span class="err">//time</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>record id</td>
</tr>
<tr>
<td>user_id</td>
<td>user id</td>
</tr>
<tr>
<td>type</td>
<td>Change type, 1 open position, 2 close position, 3 lighten position to reduce risk level, 4 liquidate position, 5ADL</td>
</tr>
<tr>
<td>mode</td>
<td>Position model, 1Cross, 2Fixed</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>price</td>
<td>proposed price</td>
</tr>
<tr>
<td>hold_dx</td>
<td>Change in position</td>
</tr>
<tr>
<td>order_side</td>
<td>Position side, 1Long, 2Short</td>
</tr>
<tr>
<td>time</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1><h2 id='e08c1d4f9a'>错误码</h2>
<table><thead>
<tr>
<th>Code</th>
<th>描述</th>
<th>Msg</th>
</tr>
</thead><tbody>
<tr>
<td>2003</td>
<td>Cookie 失效</td>
<td>Cookie expired</td>
</tr>
<tr>
<td>2033</td>
<td>操作失败！订单已完成或已撤销</td>
<td>Operation failed! Order completed or canceled</td>
</tr>
<tr>
<td>2034</td>
<td>操作失败！请检查参数是否正确</td>
<td>Operation failed! Please check parameter</td>
</tr>
<tr>
<td>2040</td>
<td>操作失败！没有该订单</td>
<td>Operation failed! No record</td>
</tr>
<tr>
<td>2064</td>
<td>订单撤销中，不能再次撤销</td>
<td>Canceling. Unable to cancel again</td>
</tr>
<tr>
<td>2065</td>
<td>委托价格设置过高，请重新设置价格</td>
<td>Precatory price is exorbitant, please reset</td>
</tr>
<tr>
<td>2066</td>
<td>委托价格设置过低，请重新设置价格</td>
<td>Precatory price is low , please reset</td>
</tr>
<tr>
<td>2067</td>
<td>暂不支持市价单</td>
<td>Limit Order Only</td>
</tr>
<tr>
<td>2068</td>
<td>下单数量不能低于0.0001</td>
<td>Min Amount:0.0001</td>
</tr>
<tr>
<td>2069</td>
<td>市价单无法撤销</td>
<td>Market order can not be canceled</td>
</tr>
<tr>
<td>2078</td>
<td>下单价格非法</td>
<td>unvalid order price</td>
</tr>
<tr>
<td>2085</td>
<td>币种最小下单数量限制</td>
<td>the trade amount is low</td>
</tr>
<tr>
<td>2086</td>
<td>账户资产异常,限制下单</td>
<td>Abnormal account assets, trade is forbiden</td>
</tr>
<tr>
<td>2091</td>
<td>请求过于频繁，请稍后再试</td>
<td>request is too frequency, please try again later</td>
</tr>
<tr>
<td>2092</td>
<td>币种最小下单金额限制</td>
<td>Minimum amount not met</td>
</tr>
<tr>
<td>3000</td>
<td>请求参数错误</td>
<td>Requested parameter incorrect</td>
</tr>
<tr>
<td>3002</td>
<td>参数不能为空</td>
<td>Parameter cannot be null</td>
</tr>
<tr>
<td>3009</td>
<td>推送订阅channel不合法</td>
<td>Illegal subscription channel</td>
</tr>
<tr>
<td>3010</td>
<td>websocket连接异常</td>
<td>websocket connection error</td>
</tr>
<tr>
<td>3011</td>
<td>接口不支持apikey请求方式</td>
<td>Illegal subscribe event</td>
</tr>
<tr>
<td>3012</td>
<td>apikey无效</td>
<td>Interface does not support apikey request method</td>
</tr>
<tr>
<td>3016</td>
<td>交易对错误</td>
<td>Invalid apikey</td>
</tr>
<tr>
<td>3017</td>
<td>推送订阅event不合法</td>
<td>Trading pair error</td>
</tr>
<tr>
<td>3024</td>
<td>apikey权限不足</td>
<td>apikey authorization insufficient</td>
</tr>
<tr>
<td>3025</td>
<td>apikey签名验证失败</td>
<td>apikey signature verification failed</td>
</tr>
<tr>
<td>3026</td>
<td>apikey ip受限制</td>
<td>apikey ip is restricted</td>
</tr>
<tr>
<td>3027</td>
<td>账户没有apikey</td>
<td>No apikey in your account</td>
</tr>
<tr>
<td>3028</td>
<td>账户apikey数量超过了限制数量</td>
<td>Account apikey has exceeded the limit amount</td>
</tr>
<tr>
<td>3029</td>
<td>apikey允许ip数量超过了限制数量</td>
<td>apikey ip has exceeded the limit amount</td>
</tr>
<tr>
<td>3033</td>
<td>查询类请求限制一个cmd</td>
<td>query allow only one cmd</td>
</tr>
<tr>
<td>3034</td>
<td>最大cmd个数限制</td>
<td>maxinum cmds</td>
</tr>
<tr>
<td>3035</td>
<td>cmd请求个数限制</td>
<td>too many cmds</td>
</tr>
<tr>
<td>4000</td>
<td>当前网络连接不稳定，请稍候重试</td>
<td>the network is unstable now, please try again later</td>
</tr>
<tr>
<td>4003</td>
<td>服务器繁忙，请稍后再试</td>
<td>The server is busy, please try again later</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
      <script>
        const lang_btn = document.getElementById('lang_box');
        const btn_spot = document.getElementById('btn_spot');
        const btn_contract = document.getElementById('btn_contract');
        const btn_contract_coin = document.getElementById('btn_contract_coin')
        const btn_v1 = document.getElementById('btn_v1')

        const url = GetUrlRelativePath();

        if(url.indexOf('en') != -1){
          //英文

          lang_btn.innerHTML = '中文';
          btn_spot.innerHTML = 'Spot';
          btn_contract_coin.innerHTML = 'ContractCoin';
          btn_contract.innerHTML = 'Contract USDT';
          btn_v1.innerHTML = 'Use V1 API?';

          lang_btn.href = url.replace('en/', 'zh/');
          btn_spot.href = btn_spot.href.replace('zh/', 'en/');
          btn_contract_coin.href = btn_contract_coin.href.replace('zh/', 'en/');
          btn_contract.href = btn_contract.href.replace('zh/', 'en/');

        }else{
          //中文
          lang_btn.innerHTML = 'English';
          btn_spot.innerHTML = '现货';
          btn_contract_coin.innerHTML = '币本位永续合约';
          btn_contract.innerHTML = 'U本位永续合约';
          btn_v1.innerHTML = '使用v1版本API';

          lang_btn.href = url.replace('zh/', 'en/');
          btn_spot.href = btn_spot.href.replace('en/', 'zh/');
          btn_contract_coin.href = btn_contract_coin.href.replace('en/', 'zh/');
          btn_contract.href = btn_contract.href.replace('en/', 'zh/');
        }

        if(location.href.indexOf('v3/spot/') > 0){
          btn_spot.className = 'current';
          btn_contract_coin.className = '';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/bc/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = 'current';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/bu/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = '';
          btn_contract.className = 'current';
        }

        lang_btn.style.display = 'block';
        function GetUrlRelativePath(){
          let url = document.location.toString();
          let arrUrl = url.split("//");
          let start = arrUrl[1].indexOf("/");
          let relUrl = arrUrl[1].substring(start);
          if(relUrl.indexOf("?") != -1){
            relUrl = relUrl.split("?")[0];
          }
          if(relUrl.indexOf("#") != -1){
            relUrl = relUrl.split("#")[0];
          }
          return relUrl;
    　　}
      </script>
</html>
