
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bibox API文档(v3)</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-1df89a6c.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-628c1a7f.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <header>
      <div class="flex_box">
        <img src="images/logo-5720d610.png" class="logo" alt="" />
        <div class="nav_box">
          <span class="nav_cell nav_tab">
            <a href="/v3/spot/zh/" id="btn_spot">现货</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/bu/zh/" id="btn_contract">U本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/bc/zh/" id="btn_contract_coin">币本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="https://biboxcom.github.io/zh-hans/" id="btn_v1">使用v1版本API</a>
          </span>
        </div>
      </div>
      <a href="/v3/spot/en/" class="lang" id="lang_box">English</a>
    </header>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#u" class="toc-h1 toc-link" data-title="U本位合约">U本位合约</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sdk" class="toc-h2 toc-link" data-title="SDK与代码示例">SDK与代码示例</a>
                  </li>
                  <li>
                    <a href="#1" class="toc-h2 toc-link" data-title="1.签名接口请求方式">1.签名接口请求方式</a>
                  </li>
                  <li>
                    <a href="#2" class="toc-h2 toc-link" data-title="2.资金划转">2.资金划转</a>
                  </li>
                  <li>
                    <a href="#3" class="toc-h2 toc-link" data-title="3.下单">3.下单</a>
                  </li>
                  <li>
                    <a href="#4" class="toc-h2 toc-link" data-title="4.撤单">4.撤单</a>
                  </li>
                  <li>
                    <a href="#5" class="toc-h2 toc-link" data-title="5.批量撤单">5.批量撤单</a>
                  </li>
                  <li>
                    <a href="#6" class="toc-h2 toc-link" data-title="6.全部撤单">6.全部撤单</a>
                  </li>
                  <li>
                    <a href="#7" class="toc-h2 toc-link" data-title="7.逐仓调整保证金">7.逐仓调整保证金</a>
                  </li>
                  <li>
                    <a href="#8" class="toc-h2 toc-link" data-title="8.调整持仓模式及杠杆">8.调整持仓模式及杠杆</a>
                  </li>
                  <li>
                    <a href="#9" class="toc-h2 toc-link" data-title="9.查询资产">9.查询资产</a>
                  </li>
                  <li>
                    <a href="#10" class="toc-h2 toc-link" data-title="10.查询仓位">10.查询仓位</a>
                  </li>
                  <li>
                    <a href="#11" class="toc-h2 toc-link" data-title="11.查询订单列表">11.查询订单列表</a>
                  </li>
                  <li>
                    <a href="#12" class="toc-h2 toc-link" data-title="12.查询订单">12.查询订单</a>
                  </li>
                  <li>
                    <a href="#13" class="toc-h2 toc-link" data-title="13.批量查询订单列表">13.批量查询订单列表</a>
                  </li>
                  <li>
                    <a href="#14-clientoid" class="toc-h2 toc-link" data-title="14.根据clientoid批量查询订单列表">14.根据clientoid批量查询订单列表</a>
                  </li>
                  <li>
                    <a href="#15" class="toc-h2 toc-link" data-title="15.获取服务器时间">15.获取服务器时间</a>
                  </li>
                  <li>
                    <a href="#16" class="toc-h2 toc-link" data-title="16.查询持仓变化记录">16.查询持仓变化记录</a>
                  </li>
                  <li>
                    <a href="#17" class="toc-h2 toc-link" data-title="17.查询订单成交明细">17.查询订单成交明细</a>
                  </li>
                  <li>
                    <a href="#18" class="toc-h2 toc-link" data-title="18.查询历史委托">18.查询历史委托</a>
                  </li>
                  <li>
                    <a href="#19" class="toc-h2 toc-link" data-title="19.查询订单">19.查询订单</a>
                  </li>
                  <li>
                    <a href="#19-1" class="toc-h2 toc-link" data-title="19.1.查询账单">19.1.查询账单</a>
                  </li>
                  <li>
                    <a href="#19-2" class="toc-h2 toc-link" data-title="19.2.查询资产估值">19.2.查询资产估值</a>
                  </li>
                  <li>
                    <a href="#20" class="toc-h2 toc-link" data-title="20.查询资金费率">20.查询资金费率</a>
                  </li>
                  <li>
                    <a href="#21" class="toc-h2 toc-link" data-title="21.查询标记价格">21.查询标记价格</a>
                  </li>
                  <li>
                    <a href="#22" class="toc-h2 toc-link" data-title="22.查询合约基本信息">22.查询合约基本信息</a>
                  </li>
                  <li>
                    <a href="#23" class="toc-h2 toc-link" data-title="23.查询精度配置">23.查询精度配置</a>
                  </li>
                  <li>
                    <a href="#24-k" class="toc-h2 toc-link" data-title="24.查询k线">24.查询k线</a>
                  </li>
                  <li>
                    <a href="#25" class="toc-h2 toc-link" data-title="25.查询合约市场深度">25.查询合约市场深度</a>
                  </li>
                  <li>
                    <a href="#26-kline" class="toc-h2 toc-link" data-title="26.订阅 Kline 数据">26.订阅 Kline 数据</a>
                  </li>
                  <li>
                    <a href="#27" class="toc-h2 toc-link" data-title="27.订阅标记价格">27.订阅标记价格</a>
                  </li>
                  <li>
                    <a href="#28" class="toc-h2 toc-link" data-title="28.订阅深度">28.订阅深度</a>
                  </li>
                  <li>
                    <a href="#29" class="toc-h2 toc-link" data-title="29.订阅成交记录">29.订阅成交记录</a>
                  </li>
                  <li>
                    <a href="#30" class="toc-h2 toc-link" data-title="30.订阅最新成交价">30.订阅最新成交价</a>
                  </li>
                  <li>
                    <a href="#31" class="toc-h2 toc-link" data-title="31.订阅用户数据方法">31.订阅用户数据方法</a>
                  </li>
                  <li>
                    <a href="#32" class="toc-h2 toc-link" data-title="32.订阅用户数据解析资产">32.订阅用户数据解析资产</a>
                  </li>
                  <li>
                    <a href="#33" class="toc-h2 toc-link" data-title="33.订阅用户数据解析仓位">33.订阅用户数据解析仓位</a>
                  </li>
                  <li>
                    <a href="#34" class="toc-h2 toc-link" data-title="34.订阅用户数据解析挂单">34.订阅用户数据解析挂单</a>
                  </li>
                  <li>
                    <a href="#35" class="toc-h2 toc-link" data-title="35.订阅用户数据解析成交明细">35.订阅用户数据解析成交明细</a>
                  </li>
                  <li>
                    <a href="#36" class="toc-h2 toc-link" data-title="36.订阅用户数据解析持仓被动变化信息">36.订阅用户数据解析持仓被动变化信息</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#e08c1d4f9a" class="toc-h2 toc-link" data-title="错误码">错误码</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.bibox.com'>开始交易</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='u'>U本位合约</h1><h2 id='sdk'>SDK与代码示例</h2>
<p>Bibox为开发人员提供了多种语言版本的合约SDK。
这些SDK基于Bibox合约API开发，并自动完成以下功能：</p>

<ul>
<li>数据签名</li>
<li>数据合成，例如：自动根据增量数据合成完整的深度</li>
</ul>

<p>因此，使用SDK开发访问Bibox的程序比使用API更便捷，开发周期更短。</p>

<p>如果需要下载或者阅读更多信息，请点击以下链接:</p>

<ul>
<li><a href="https://github.com/Biboxcom/futures_usdt_java">Java</a></li>
</ul>
<h2 id='1'>1.签名接口请求方式</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.当前时间戳</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.请求的参数</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.格式化参数</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.这就是需要签名的字符串</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//你的 apikey 密码</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.签名后的结果</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbuassets/transfer</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.格式化参数</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.返回值</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li><p>1.获取当前时间戳timestamp</p></li>
<li><p>2.了解接口请求需要的参数param，并格式化参数，得出strParam</p></li>
<li><p>3.根据生成需要签名的字符串strToSign</p></li>
<li><p>4.用apikey的密码secret，对需要签名的字符串strToSign进行 HmacMD5 加密签名</p></li>
<li><p>5.请求的时候，设置http headers 的以下字段</p></li>
</ul>

<table><thead>
<tr>
<th>字段名</th>
<th>类型</th>
<th>描述</th>
<th>取值</th>
</tr>
</thead><tbody>
<tr>
<td>content-type</td>
<td>string</td>
<td></td>
<td>&#39;application/json&#39;</td>
</tr>
<tr>
<td>bibox-api-key</td>
<td>string</td>
<td>你的apikey</td>
<td></td>
</tr>
<tr>
<td>bibox-timestamp</td>
<td>long</td>
<td>当前时间戳，用毫秒表示</td>
<td>timestamp</td>
</tr>
<tr>
<td>bibox-api-sign</td>
<td>string</td>
<td>签名结果</td>
<td>sign</td>
</tr>
</tbody></table>

<ul>
<li><p>6.请求的时候，设置 http body 为格式化后的请求参数 strParam </p></li>
<li><p>7.返回值含有字段state, 0表示成功, 其他错误码, 表示失败。成功的结果会有对应的字段result，失败的结果会有对应的字段msg。</p></li>
</ul>
<h2 id='2'>2.资金划转</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.当前时间戳</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.请求的参数</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.格式化参数</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.这就是需要签名的字符串</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//你的 apikey 密码</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.签名后的结果</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbuassets/transfer</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.格式化参数</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.返回值</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbuassets/transfer</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>true</td>
<td>string</td>
<td>数量转字符串</td>
<td></td>
<td></td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>string</td>
<td>币种</td>
<td></td>
<td>USDT</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>integer</td>
<td>0转入,1转出</td>
<td></td>
<td>0,1</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">成功</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"352559634189422592"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='3'>3.下单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/open</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_type</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">11500</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_from</span><span class="dl">"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_oid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1234567890</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/open</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>string</td>
<td>数量转字符串</td>
<td></td>
<td></td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>下单类型,1开多,2开空,3平多,4平空</td>
<td></td>
<td>1,2,3,4</td>
</tr>
<tr>
<td>order_type</td>
<td>true</td>
<td>integer</td>
<td>下单方式,1市价单,2限价单</td>
<td></td>
<td>1,2</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>string</td>
<td>下单价格</td>
<td></td>
<td></td>
</tr>
<tr>
<td>order_from</td>
<td>true</td>
<td>integer</td>
<td>下单来源</td>
<td></td>
<td>6</td>
</tr>
<tr>
<td>client_oid</td>
<td>false</td>
<td>string</td>
<td>自定义id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"425510999949316"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">订单id</span><span class="w">
    </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">自定义id</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">订单状态</span><span class="w"> </span><span class="mi">1</span><span class="err">等待成交，</span><span class="mi">2</span><span class="err">部分成交，</span><span class="mi">3</span><span class="err">全部成交，</span><span class="mi">4</span><span class="err">部分撤销，</span><span class="mi">5</span><span class="err">全部撤销，</span><span class="mi">100</span><span class="err">下单失败</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"open"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>order_id</td>
<td>订单id</td>
</tr>
<tr>
<td>client_oid</td>
<td>自定义id</td>
</tr>
<tr>
<td>status</td>
<td>订单状态 1等待成交，2部分成交，3全部成交，4部分撤销，5全部撤销，100下单失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='4'>4.撤单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/close</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">425510999949316</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/close</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>订单id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">成功</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"close"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='5'>5.批量撤单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/closeBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">2234567890</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">2234567891</span><span class="dl">"</span><span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/closeBatch</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>数组</td>
<td>订单id数组</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成功</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"close"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='6'>6.全部撤单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/closeAll</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/closeAll</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成功</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"closeAll"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='7'>7.逐仓调整保证金</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/changeMargin</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">margin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/changeMargin</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>margin</td>
<td>true</td>
<td>string</td>
<td>保证金数量</td>
<td></td>
<td></td>
</tr>
<tr>
<td>side</td>
<td>true</td>
<td>integer</td>
<td>仓位方向，1多仓, 2空仓</td>
<td></td>
<td>1，2</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">3103</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">失败</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"没有持仓不支持该操作"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"changeMargin"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='8'>8.调整持仓模式及杠杆</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/changeMode</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage_long</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage_short</span><span class="dl">"</span><span class="p">:</span><span class="mi">20</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/changeMode</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>mode</td>
<td>true</td>
<td>integer</td>
<td>仓位模式，1全仓， 2逐仓</td>
<td></td>
<td>1，2</td>
</tr>
<tr>
<td>leverage_long</td>
<td>true</td>
<td>integer</td>
<td>多仓杠杆倍数</td>
<td></td>
<td>1~100</td>
</tr>
<tr>
<td>leverage_short</td>
<td>true</td>
<td>integer</td>
<td>空仓杠杆倍数</td>
<td></td>
<td>1~100</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"changeMode"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='9'>9.查询资产</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/assets</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "coin":"USDT",</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/assets</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>coin</td>
<td>false</td>
<td>string</td>
<td>币种符号</td>
<td></td>
<td>BTC，ETH，...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="err">ff:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">b:</span><span class="w"> </span><span class="err">'</span><span class="mf">219311.9556</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">c:</span><span class="w"> </span><span class="err">'USDT'</span><span class="p">,</span><span class="w">
           </span><span class="err">u:</span><span class="w"> </span><span class="mi">100006</span><span class="p">,</span><span class="w">
           </span><span class="err">mc:</span><span class="w"> </span><span class="err">'</span><span class="mf">93265.8573</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">mf:</span><span class="w"> </span><span class="err">'</span><span class="mf">60.8824</span><span class="err">'</span><span class="p">,</span><span class="w">
           </span><span class="err">fc:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"assets"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>b</td>
<td>可用余额</td>
</tr>
<tr>
<td>c</td>
<td>币种</td>
</tr>
<tr>
<td>u</td>
<td>用户id</td>
</tr>
<tr>
<td>ff</td>
<td>逐仓冻结资金</td>
</tr>
<tr>
<td>fc</td>
<td>全仓冻结资金</td>
</tr>
<tr>
<td>mf</td>
<td>逐仓保证金资金</td>
</tr>
<tr>
<td>mc</td>
<td>全仓保证金资金</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='10'>10.查询仓位</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/position</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "pair":"4BTC_USDT",</span>
    <span class="c1">// "side":1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/position</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>side</td>
<td>false</td>
<td>integer</td>
<td>仓位方向，1多仓, 2空仓</td>
<td></td>
<td>1，2</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pt"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//忽略</span><span class="w">
            </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//忽略</span><span class="w">
            </span><span class="nl">"l"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">杠杆</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">仓位方向:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">多仓</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">空仓</span><span class="w">
            </span><span class="nl">"pa"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//告警价格</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//用户id</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//忽略</span><span class="w">
            </span><span class="nl">"pf"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//爆仓价格</span><span class="w">
            </span><span class="nl">"md"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//仓位模式:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">全仓</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">逐仓</span><span class="w">
            </span><span class="nl">"lc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">可平仓位价值</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易对</span><span class="w">
            </span><span class="nl">"mg"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//保证金</span><span class="w">
            </span><span class="nl">"hc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位价值</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">合约张数X合约面值</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//忽略</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="s2">"0"</span><span class="w"> </span><span class="err">//开仓价格</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"position"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>l</td>
<td>杠杆</td>
</tr>
<tr>
<td>sd</td>
<td>仓位方向: 1, 多仓 2 , 空仓</td>
</tr>
<tr>
<td>pa</td>
<td>告警价格</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>pf</td>
<td>爆仓价格</td>
</tr>
<tr>
<td>md</td>
<td>仓位模式: 1全仓, 2逐仓</td>
</tr>
<tr>
<td>lc</td>
<td>可平仓位价值</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>mg</td>
<td>保证金</td>
</tr>
<tr>
<td>hc</td>
<td>仓位价值 = 合约张数X合约面值</td>
</tr>
<tr>
<td>po</td>
<td>开仓价格</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='11'>11.查询订单列表</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/list</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "pair":"4BTC_USDT",</span>
    <span class="c1">// "order_side":1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/list</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>下单类型,1开多,2开空,3平多,4平空</td>
<td></td>
<td>1,2,3,4</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"p"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"o"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//手续费</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交价格</span><span class="w">
                </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交数量</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单价格</span><span class="w">
                </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单数量</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//下单方向</span><span class="w">
                </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//下单时间</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//用户id</span><span class="w">
                </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//挂单冻结</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//优惠券抵扣</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//交易对</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//bix抵扣</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//忽略</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderList"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>eq</td>
<td>成交数量</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>q</td>
<td>下单数量</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>r</td>
<td>失败原因</td>
</tr>
<tr>
<td>s</td>
<td>订单状态</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>fz</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='12'>12.查询订单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/detail</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">426610511577093</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/detail</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>订单id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//手续费</span><span class="w">
        </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交价格</span><span class="w">
        </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交数量</span><span class="w">
        </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单价格</span><span class="w">
        </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
        </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单数量</span><span class="w">
        </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//下单方向</span><span class="w">
        </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
        </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
        </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//下单时间</span><span class="w">
        </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//用户id</span><span class="w">
        </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//挂单冻结</span><span class="w">
        </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//优惠券抵扣</span><span class="w">
        </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
        </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//交易对</span><span class="w">
        </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
        </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//bix抵扣</span><span class="w">
        </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//忽略</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderDetail"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>eq</td>
<td>成交数量</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>q</td>
<td>下单数量</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>r</td>
<td>失败原因</td>
</tr>
<tr>
<td>s</td>
<td>订单状态</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>fz</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='13'>13.批量查询订单列表</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/listBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">426610511577093</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/listBatch</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>数组</td>
<td>订单id数组</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//手续费</span><span class="w">
            </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交价格</span><span class="w">
            </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交数量</span><span class="w">
            </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单价格</span><span class="w">
            </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
            </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单数量</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//下单方向</span><span class="w">
            </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
            </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
            </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//下单时间</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//用户id</span><span class="w">
            </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//挂单冻结</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//优惠券抵扣</span><span class="w">
            </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//交易对</span><span class="w">
            </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//bix抵扣</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//忽略</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderListBatch"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>eq</td>
<td>成交数量</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>q</td>
<td>下单数量</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>r</td>
<td>失败原因</td>
</tr>
<tr>
<td>s</td>
<td>订单状态</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>fz</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='14-clientoid'>14.根据clientoid批量查询订单列表</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/cbu/order/listBatchByClientOid</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span><span class="dl">"</span><span class="s2">1602679943911</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3/cbu/order/listBatchByClientOid</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>数组</td>
<td>自定义订单id数组</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//手续费</span><span class="w">
            </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交价格</span><span class="w">
            </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//成交数量</span><span class="w">
            </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11092"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单价格</span><span class="w">
            </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
            </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//下单数量</span><span class="w">
            </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//下单方向</span><span class="w">
            </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//reason</span><span class="w">
            </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">status</span><span class="w">
            </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602679944815</span><span class="p">,</span><span class="w"> </span><span class="err">//下单时间</span><span class="w">
            </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//用户id</span><span class="w">
            </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000091417"</span><span class="p">,</span><span class="w"> </span><span class="err">//挂单冻结</span><span class="w">
            </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//优惠券抵扣</span><span class="w">
            </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//order</span><span class="w"> </span><span class="err">from</span><span class="w">
            </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//交易对</span><span class="w">
            </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"426610511577093"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602679943911"</span><span class="p">,</span><span class="w"> </span><span class="err">//clientoid</span><span class="w">
            </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//bix抵扣</span><span class="w">
            </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w"> </span><span class="err">//忽略</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"orderListBatchByCLientOid"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>eq</td>
<td>成交数量</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>q</td>
<td>下单数量</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>r</td>
<td>失败原因</td>
</tr>
<tr>
<td>s</td>
<td>订单状态</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>fz</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='15'>15.获取服务器时间</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v3/cbu/timestamp</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1602680518605"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>服务器时间</td>
</tr>
</tbody></table>
<h2 id='16'>16.查询持仓变化记录</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/dealLog</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/dealLog</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>第几页</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>条数</td>
<td></td>
<td>10,20, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842635654"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">仓位变化id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">用户id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">币种</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">交易对</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位方向</span><span class="w"> </span><span class="mi">1</span><span class="err">多仓，</span><span class="mi">2</span><span class="err">空仓</span><span class="w">
                </span><span class="nl">"model"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位模式，</span><span class="mi">1</span><span class="err">全仓，</span><span class="mi">2</span><span class="err">逐仓</span><span class="w">
                </span><span class="nl">"log_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">变化类型</span><span class="w"> </span><span class="mi">1</span><span class="err">开仓，</span><span class="mi">2</span><span class="err">平仓，</span><span class="mi">3</span><span class="err">减仓降低风险等级</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="err">爆仓清空仓位</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="err">ADL</span><span class="w">
                </span><span class="nl">"hold_coin_dx"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位持仓变化量</span><span class="w">
                </span><span class="nl">"hold_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位持仓</span><span class="w">
                </span><span class="nl">"price_log"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">参考价格</span><span class="w">
                </span><span class="nl">"price_open"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">开仓均价</span><span class="w">
                </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">收益</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">手续费</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">bix抵扣</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">优惠券抵扣</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">变化时间</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>id</td>
<td>仓位变化id</td>
</tr>
<tr>
<td>user_id</td>
<td>用户id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>side</td>
<td>仓位方向 1多仓，2空仓</td>
</tr>
<tr>
<td>model</td>
<td>仓位模式，1全仓，2逐仓</td>
</tr>
<tr>
<td>log_type</td>
<td>变化类型 1开仓，2平仓，3减仓降低风险等级, 4爆仓清空仓位, 5ADL</td>
</tr>
<tr>
<td>hold_coin_dx</td>
<td>仓位持仓变化量</td>
</tr>
<tr>
<td>hold_coin</td>
<td>仓位持仓</td>
</tr>
<tr>
<td>price_log</td>
<td>参考价格</td>
</tr>
<tr>
<td>price_open</td>
<td>开仓均价</td>
</tr>
<tr>
<td>profit</td>
<td>收益</td>
</tr>
<tr>
<td>fee</td>
<td>手续费</td>
</tr>
<tr>
<td>fee_bix</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>createdAt</td>
<td>变化时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='17'>17.查询订单成交明细</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/orderDetail</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">orderId</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">421112953438213</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/orderDetail</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>true</td>
<td>long</td>
<td>订单id</td>
<td></td>
<td></td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>第几页</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>条数</td>
<td></td>
<td>10,20, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842635651"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">明细id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">币种</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">交易对</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单方向</span><span class="w"> </span><span class="mi">1</span><span class="err">开多，</span><span class="mi">2</span><span class="err">开空，</span><span class="mi">3</span><span class="err">平多，</span><span class="mi">4</span><span class="err">平空</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">订单来源</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"10692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单价格</span><span class="w">
                </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"11510.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交价格</span><span class="w">
                </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交价值</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000608"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">手续费</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">bix抵扣</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">优惠券抵扣</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">是否是maker</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T02:58:59.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">成交时间</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>id</td>
<td>明细id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>side</td>
<td>挂单方向 1开多，2开空，3平多，4平空</td>
</tr>
<tr>
<td>order_from</td>
<td>订单来源</td>
</tr>
<tr>
<td>price</td>
<td>挂单价格</td>
</tr>
<tr>
<td>deal_price</td>
<td>成交价格</td>
</tr>
<tr>
<td>deal_coin</td>
<td>成交价值</td>
</tr>
<tr>
<td>fee</td>
<td>手续费</td>
</tr>
<tr>
<td>fee_bix</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>createdAt</td>
<td>变化时间</td>
</tr>
<tr>
<td>is_maker</td>
<td>是否是maker</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='18'>18.查询历史委托</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/orderHistory</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/orderHistory</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>合约符号</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>第几页</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>条数</td>
<td></td>
<td>10,20, ...</td>
</tr>
<tr>
<td>side</td>
<td>false</td>
<td>integer</td>
<td>1开多 2开空 3平多 4平空</td>
<td></td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>false</td>
<td>数组</td>
<td>状态，3:全部成交，4:部分撤单， 5:全部撤单， 100:下单失败</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">421112953438215</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">订单id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">用户id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">币种</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">交易对</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单方向</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单类型</span><span class="w"> </span><span class="mi">1</span><span class="err">市价，</span><span class="mi">2</span><span class="err">限价</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单价格</span><span class="w">
                </span><span class="nl">"amount_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单数量</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">冻结资金</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交均价</span><span class="w">
                </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交价值</span><span class="w">
                </span><span class="nl">"deal_num"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交笔数</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">手续费</span><span class="w">
                </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">bix抵扣</span><span class="w">
                </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">优惠券抵扣</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">订单状态，</span><span class="mi">1</span><span class="err">未成交，</span><span class="mi">2</span><span class="err">部分成交，</span><span class="mi">3</span><span class="err">完全成交，</span><span class="mi">4</span><span class="err">部分撤销，</span><span class="mi">5</span><span class="err">全部撤销，</span><span class="mi">100</span><span class="err">下单失败</span><span class="w">
                </span><span class="nl">"reason"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">失败原因</span><span class="w">
                </span><span class="nl">"fee_rate_maker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">maker手续费费率</span><span class="w">
                </span><span class="nl">"fee_rate_taker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">taker手续费费率</span><span class="w">
                </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="mi">1602644402806</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">自定义id</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单时间</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">最新变化时间</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>id</td>
<td>订单id</td>
</tr>
<tr>
<td>user_id</td>
<td>用户id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>side</td>
<td>挂单方向 1开多，2开空，3平多，4平空</td>
</tr>
<tr>
<td>order_type</td>
<td>挂单类型 1市价，2限价</td>
</tr>
<tr>
<td>price</td>
<td>挂单价格</td>
</tr>
<tr>
<td>amount_coin</td>
<td>挂单数量</td>
</tr>
<tr>
<td>freeze</td>
<td>冻结资金</td>
</tr>
<tr>
<td>price_deal</td>
<td>成交均价</td>
</tr>
<tr>
<td>deal_coin</td>
<td>成交价值</td>
</tr>
<tr>
<td>deal_num</td>
<td>成交笔数</td>
</tr>
<tr>
<td>fee</td>
<td>手续费</td>
</tr>
<tr>
<td>fee_bix</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>status</td>
<td>订单状态，1未成交，2部分成交，3完全成交，4部分撤销，5全部撤销，100下单失败</td>
</tr>
<tr>
<td>reason</td>
<td>失败原因</td>
</tr>
<tr>
<td>fee_rate_maker</td>
<td>maker手续费费率</td>
</tr>
<tr>
<td>fee_rate_taker</td>
<td>taker手续费费率</td>
</tr>
<tr>
<td>client_oid</td>
<td>自定义id</td>
</tr>
<tr>
<td>order_from</td>
<td>订单来源</td>
</tr>
<tr>
<td>createdAt</td>
<td>挂单时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='19'>19.查询订单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/orderById</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">orderIds</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">421112953438213</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">421112953438214</span><span class="dl">"</span><span class="p">],</span>
    <span class="dl">"</span><span class="s2">clientOids</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">1602644402806</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1602644402811</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/orderById</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>orderIds</td>
<td>true</td>
<td>数组</td>
<td>订单id数组</td>
<td></td>
<td></td>
</tr>
<tr>
<td>clientOids</td>
<td>true</td>
<td>数组</td>
<td>订单自定义di数组</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">421112953438214</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">订单id</span><span class="w">
            </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">用户id</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">币种</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">交易对</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单方向</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单类型</span><span class="w"> </span><span class="mi">1</span><span class="err">市价，</span><span class="mi">2</span><span class="err">限价</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单价格</span><span class="w">
            </span><span class="nl">"amount_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单数量</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">冻结资金</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"11692.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交均价</span><span class="w">
            </span><span class="nl">"deal_coin"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交价值</span><span class="w">
            </span><span class="nl">"deal_num"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">成交笔数</span><span class="w">
            </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000000599"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">手续费</span><span class="w">
            </span><span class="nl">"fee_bix"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">bix抵扣</span><span class="w">
            </span><span class="nl">"fee_bix0"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">优惠券抵扣</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">订单状态，</span><span class="mi">1</span><span class="err">未成交，</span><span class="mi">2</span><span class="err">部分成交，</span><span class="mi">3</span><span class="err">完全成交，</span><span class="mi">4</span><span class="err">部分撤销，</span><span class="mi">5</span><span class="err">全部撤销，</span><span class="mi">100</span><span class="err">下单失败</span><span class="w">
            </span><span class="nl">"reason"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">失败原因</span><span class="w">
            </span><span class="nl">"fee_rate_maker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">maker手续费费率</span><span class="w">
            </span><span class="nl">"fee_rate_taker"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">taker手续费费率</span><span class="w">
            </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="mi">1602644402806</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">自定义id</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单时间</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:00:08.000Z"</span><span class="err">//</span><span class="w"> </span><span class="err">最新变化时间</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>id</td>
<td>订单id</td>
</tr>
<tr>
<td>user_id</td>
<td>用户id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>side</td>
<td>挂单方向 1开多，2开空，3平多，4平空</td>
</tr>
<tr>
<td>order_type</td>
<td>挂单类型 1市价，2限价</td>
</tr>
<tr>
<td>price</td>
<td>挂单价格</td>
</tr>
<tr>
<td>amount_coin</td>
<td>挂单数量</td>
</tr>
<tr>
<td>freeze</td>
<td>冻结资金</td>
</tr>
<tr>
<td>price_deal</td>
<td>成交均价</td>
</tr>
<tr>
<td>deal_coin</td>
<td>成交价值</td>
</tr>
<tr>
<td>deal_num</td>
<td>成交笔数</td>
</tr>
<tr>
<td>fee</td>
<td>手续费</td>
</tr>
<tr>
<td>fee_bix</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>fee_bix0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>status</td>
<td>订单状态，1未成交，2部分成交，3完全成交，4部分撤销，5全部撤销，100下单失败</td>
</tr>
<tr>
<td>reason</td>
<td>失败原因</td>
</tr>
<tr>
<td>fee_rate_maker</td>
<td>maker手续费费率</td>
</tr>
<tr>
<td>fee_rate_taker</td>
<td>taker手续费费率</td>
</tr>
<tr>
<td>client_oid</td>
<td>自定义id</td>
</tr>
<tr>
<td>order_from</td>
<td>订单来源</td>
</tr>
<tr>
<td>createdAt</td>
<td>挂单时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='19-1'>19.1.查询账单</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/bills</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// pair: '4BTC_USDT',</span>
    <span class="na">coin_symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span><span class="p">,</span> 
    <span class="na">from</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">,</span>
    <span class="na">to</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">,</span> 
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/transferLog</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>币种符号</td>
<td></td>
<td>USDT</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>第几页</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>条数</td>
<td></td>
<td>10,20, ...</td>
</tr>
<tr>
<td>from</td>
<td>false</td>
<td>integer</td>
<td>起始时间</td>
<td></td>
<td></td>
</tr>
<tr>
<td>to</td>
<td>false</td>
<td>integer</td>
<td>结束时间</td>
<td></td>
<td></td>
</tr>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT,...</td>
</tr>
<tr>
<td>bill_type</td>
<td>false</td>
<td>integer</td>
<td>账单类型</td>
<td></td>
<td>1划转,2交易,3交易手续费,4资金费用,5资金费用调整,6降低风险等级减仓,7强平,8ADL系统减仓</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906862835742"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"change_amount"</span><span class="p">:</span><span class="s2">"0.0010000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"change_result"</span><span class="p">:</span><span class="s2">"2.0230606258"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bill_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"comment"</span><span class="p">:</span><span class="s2">"划转"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-11-26T03:59:09.000Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-11-26T03:59:09.000Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>id</td>
<td>账单id</td>
</tr>
<tr>
<td>user_id</td>
<td>用户id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>bill_type</td>
<td>账单类型:1划转,2交易,3交易手续费,4资金费用,5资金费用调整,6降低风险等级减仓,7强平,8ADL系统减仓</td>
</tr>
<tr>
<td>change_amount</td>
<td>划转数量</td>
</tr>
<tr>
<td>createdAt</td>
<td>时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='19-2'>19.2.查询资产估值</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/base_u/bassets</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>

<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//请求路径</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//请求方式</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//设置请求头</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//post参数字符串</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/base_u/bassets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"219311.9556002830"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"93326.7398201745"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-60.6199055207"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unprofit"</span><span class="p">:</span><span class="s2">"192892.4452599042"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unprofit_cross"</span><span class="p">:</span><span class="s2">"191985.4645940268"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"can_transfer"</span><span class="p">:</span><span class="s2">"219311.9556002830"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="s2">"505531.1406803617"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance_usd"</span><span class="p">:</span><span class="s2">"505529.2297726499"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance_cny"</span><span class="p">:</span><span class="s2">"3269853.9470297875"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance_btc"</span><span class="p">:</span><span class="s2">"15.1760448432"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_freeze"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"93326.7398201745"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"freeze_fixed"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"freeze_cross"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin_fixed"</span><span class="p">:</span><span class="s2">"60.8824269189"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin_cross"</span><span class="p">:</span><span class="s2">"93265.8573932556"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>币种</td>
</tr>
<tr>
<td>balance</td>
<td>可用余额</td>
</tr>
<tr>
<td>order_freeze</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>freeze_fixed</td>
<td>逐仓挂单冻结</td>
</tr>
<tr>
<td>freeze_cross</td>
<td>全仓挂单冻结</td>
</tr>
<tr>
<td>margin</td>
<td>保证金冻结</td>
</tr>
<tr>
<td>margin_fixed</td>
<td>逐仓保证金冻结</td>
</tr>
<tr>
<td>margin_cross</td>
<td>全仓保证金冻结</td>
</tr>
<tr>
<td>unprofit</td>
<td>未实现盈亏</td>
</tr>
<tr>
<td>unprofit_cross</td>
<td>全仓未实现盈亏</td>
</tr>
<tr>
<td>total_balance</td>
<td>账户权益</td>
</tr>
<tr>
<td>can_transfer</td>
<td>可转出资金</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='20'>20.查询资金费率</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buFundRate</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fund_rate"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T00:00:00.000Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"4ETH_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"0.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fund_rate"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T00:00:00.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>fund_rate</td>
<td>即将收取的资金费率</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='21'>21.查询标记价格</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buTagPrice</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="err">//交易对</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"11453.7224909000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">指数价格</span><span class="w">
            </span><span class="nl">"priceTag"</span><span class="p">:</span><span class="s2">"11454.2951770245"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">标记价格</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:41:08.000Z"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">时间</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"4ETH_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"383.1999999600"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priceTag"</span><span class="p">:</span><span class="s2">"383.2191599600"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-10-14T03:41:08.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>result</td>
<td>关键字是交易对</td>
</tr>
<tr>
<td>close</td>
<td>指数价格</td>
</tr>
<tr>
<td>priceTag</td>
<td>标记价格</td>
</tr>
<tr>
<td>createdAt</td>
<td>时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='22'>22.查询合约基本信息</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buValue</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">304</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_init"</span><span class="p">:</span><span class="s2">"10.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_min"</span><span class="p">:</span><span class="s2">"0.0100000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage_max"</span><span class="p">:</span><span class="s2">"150.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"0.0001000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_level_base"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_level_dx"</span><span class="p">:</span><span class="s2">"1.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maker_fee"</span><span class="p">:</span><span class="s2">"0.0002000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"taker_fee"</span><span class="p">:</span><span class="s2">"0.0005500000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open_max_per"</span><span class="p">:</span><span class="s2">"100.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pending_max"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hold_max"</span><span class="p">:</span><span class="s2">"100.0000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_precision"</span><span class="p">:</span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>leverage_min</td>
<td>最小杠杆倍数</td>
</tr>
<tr>
<td>leverage_max</td>
<td>最大杠杆倍数</td>
</tr>
<tr>
<td>value</td>
<td>合约面值</td>
</tr>
<tr>
<td>maker_fee</td>
<td>默认maker手续费费率</td>
</tr>
<tr>
<td>taker_fee</td>
<td>默认taker手续费费率</td>
</tr>
<tr>
<td>open_max_per</td>
<td>单笔挂单最大数量</td>
</tr>
<tr>
<td>pending_max</td>
<td>最大挂单个数</td>
</tr>
<tr>
<td>hold_max</td>
<td>最大持仓价值</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='23'>23.查询精度配置</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/buUnit</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//交易对</span><span class="w">
            </span><span class="nl">"price_unit"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//下单小数点数</span><span class="w">
            </span><span class="nl">"vol_unit"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
            </span><span class="nl">"value_unit"</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">忽略</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0代表成功，否则代表失败</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>price_unit</td>
<td>下单小数点数</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='24-k'>24.查询k线</h2>
<ul>
<li><p>1.请求路径</p></li>
<li><p>GET https://api.bibox.com/v2/mdata/kline?pair=4BTC_USDT&amp;period=1min&amp;size=10</p></li>
<li><p>2.请求参数</p></li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>k线周期</td>
<td></td>
<td>&#39;1min&#39;, &#39;3min&#39;, &#39;5min&#39;, &#39;15min&#39;, &#39;30min&#39;, &#39;1hour&#39;, &#39;2hour&#39;, &#39;4hour&#39;, &#39;6hour&#39;, &#39;12hour&#39;, &#39;day&#39;, &#39;week&#39;</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>数量</td>
<td>1000</td>
<td>1-1000</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1602680580000</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">时间戳</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">开盘价</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">最高价</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最低价</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">收盘价</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="err">//</span><span class="w"> </span><span class="err">成交量</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"kline"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>有数据代表成功,否则代表失败</td>
</tr>
<tr>
<td>time</td>
<td>时间戳</td>
</tr>
<tr>
<td>open</td>
<td>开盘价</td>
</tr>
<tr>
<td>high</td>
<td>最高价</td>
</tr>
<tr>
<td>low</td>
<td>最低价</td>
</tr>
<tr>
<td>close</td>
<td>收盘价</td>
</tr>
<tr>
<td>vol</td>
<td>成交量</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='25'>25.查询合约市场深度</h2>
<ul>
<li>1.请求路径</li>
</ul>

<p>GET https://api.bibox.com/v2/mdata/depth?pair=4BTC_USDT&amp;size=10</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>数量</td>
<td>200</td>
<td>1-200</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1602669350668</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="err">//卖方深度</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="err">//买方深度</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54054"</span><span class="p">,</span><span class="err">//挂单数量</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"10666"</span><span class="err">//挂单价格</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>有数据代表成功,否则代表失败</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>update_time</td>
<td>时间</td>
</tr>
<tr>
<td>asks</td>
<td>卖方深度</td>
</tr>
<tr>
<td>bids</td>
<td>买方深度</td>
</tr>
<tr>
<td>volume</td>
<td>挂单数量</td>
</tr>
<tr>
<td>price</td>
<td>挂单价格</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='26-kline'>26.订阅 Kline 数据</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_kline_1min</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 获得数据</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.订阅路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>K线周期</td>
<td></td>
<td>1min, 5min, 15min, 30min, 1hour, 2hour, 4hour, 6hour, 12hour, day, week</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_kline_&#39; + ${period}</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>8</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_kline_1min"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603969980000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"43045.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970040000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.70000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"5561.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>k线某周期开始时间</td>
</tr>
<tr>
<td>count</td>
<td>成交笔数</td>
</tr>
<tr>
<td>open</td>
<td>开盘价</td>
</tr>
<tr>
<td>high</td>
<td>最高价</td>
</tr>
<tr>
<td>low</td>
<td>最低价</td>
</tr>
<tr>
<td>close</td>
<td>收盘价</td>
</tr>
<tr>
<td>vol</td>
<td>成交量(合约价值)</td>
</tr>
<tr>
<td>binary</td>
<td>0代表数据没有压缩，1代表数据压缩了</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='27'>27.订阅标记价格</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDTTAGPRICE_kline_1min</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 获得数据</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.订阅路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;TAGPRICE_kline_1min&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>8</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDTTAGPRICE_kline_1min"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970520000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13153.34453367"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13153.34453367"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13151.07785535"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13151.13533507"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"30.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970580000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13150.75301752"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13150.75301752"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13149.51581987"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13149.51581987"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"5.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>k线某周期开始时间</td>
</tr>
<tr>
<td>count</td>
<td>成交笔数</td>
</tr>
<tr>
<td>open</td>
<td>开盘价</td>
</tr>
<tr>
<td>high</td>
<td>最高价</td>
</tr>
<tr>
<td>low</td>
<td>最低价</td>
</tr>
<tr>
<td>close</td>
<td>最新价</td>
</tr>
<tr>
<td>binary</td>
<td>0代表数据没有压缩，1代表数据压缩了</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='28'>28.订阅深度</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_depth</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// depth</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 获得数据</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.订阅路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_depth_&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>3</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1604021669643</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seq"</span><span class="p">:</span><span class="mi">4544162</span><span class="p">,</span><span class="w">
    </span><span class="nl">"add"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"del"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"mod"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.4"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"17012"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.3"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>update_time</td>
<td>时间</td>
</tr>
<tr>
<td>seq</td>
<td>交易对</td>
</tr>
<tr>
<td>add</td>
<td>新增的深度</td>
</tr>
<tr>
<td>del</td>
<td>删除的深度</td>
</tr>
<tr>
<td>mod</td>
<td>修改的深度</td>
</tr>
<tr>
<td>asks</td>
<td>卖单</td>
</tr>
<tr>
<td>bids</td>
<td>买单</td>
</tr>
<tr>
<td>volume</td>
<td>挂单数量</td>
</tr>
<tr>
<td>price</td>
<td>深度价格</td>
</tr>
<tr>
<td>binary</td>
<td>0代表数据没有压缩，1代表数据压缩了</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='29'>29.订阅成交记录</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_deals</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 获得数据</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.订阅路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_deals&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13570.600000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"800.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604022129044</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>price</td>
<td>成交价格</td>
</tr>
<tr>
<td>amount</td>
<td>成交价值</td>
</tr>
<tr>
<td>time</td>
<td>成交时间戳</td>
</tr>
<tr>
<td>side</td>
<td>成交方向，1-开多，2-开空</td>
</tr>
<tr>
<td>binary</td>
<td>0代表数据没有压缩，1代表数据压缩了</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='30'>30.订阅最新成交价</h2>
<blockquote>
<p>完整例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_ticker</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 获得数据</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.订阅路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>交易对</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_ticker&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_ticker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"13593.50"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_cny"</span><span class="p">:</span><span class="s2">"91076.20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13700.300000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"12986.000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="s2">"48375"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell"</span><span class="p">:</span><span class="s2">"13593.6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="s2">"56625"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"155811681.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+2.44%"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1604022393028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_last_cny"</span><span class="p">:</span><span class="s2">"91076.20000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>last</td>
<td>最新成交价</td>
</tr>
<tr>
<td>last_cny</td>
<td>最新成交价，cny计价</td>
</tr>
<tr>
<td>last_usd</td>
<td>最新成交价，usd计价</td>
</tr>
<tr>
<td>high</td>
<td>24h最高价</td>
</tr>
<tr>
<td>low</td>
<td>24h最低价</td>
</tr>
<tr>
<td>buy</td>
<td>最新买一价</td>
</tr>
<tr>
<td>buy_amount</td>
<td>买一价值)</td>
</tr>
<tr>
<td>sell</td>
<td>最新卖一价</td>
</tr>
<tr>
<td>sell_amount</td>
<td>卖一价值)</td>
</tr>
<tr>
<td>vol</td>
<td>24h成交价值</td>
</tr>
<tr>
<td>percent</td>
<td>24h涨跌幅</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳</td>
</tr>
<tr>
<td>base_last_cny</td>
<td>最新成交价，cny计价（保留8位小数）</td>
</tr>
<tr>
<td>binary</td>
<td>0代表数据没有压缩，1代表数据压缩了</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='31'>31.订阅用户数据方法</h2>
<blockquote>
<p>实际例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me/cbu</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 1.请求路径</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 你的apikey</span>
<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// 定义参数对象param，需要用到apikey</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 格式化参数对象param，得到strParam</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// apikey的密码</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strParam</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// 用apikey的密码secret对strParam进行HmacMD5签名，得到签名结果sign</span>
<span class="kd">let</span> <span class="nx">wsparam</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// 2.请求参数</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">sign</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
<span class="p">};</span>


<span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>

    <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span> <span class="o">&amp;&amp;</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">manu ping</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">wsparam</span><span class="p">));</span>

    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">incoming</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// 返回结果</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jdata</span><span class="p">.</span><span class="nx">ping</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">init</span><span class="p">();</span>


</code></pre></div>
<ul>
<li>1.请求路径</li>
</ul>

<p>wss://push.bibox.me/cbu</p>

<ul>
<li>2.请求参数</li>
</ul>

<table><thead>
<tr>
<th>参数名称</th>
<th>是否必须</th>
<th>类型</th>
<th>描述</th>
<th>默认值</th>
<th>取值范围</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>true</td>
<td>string</td>
<td>您在Bibox交易所申请的apikey</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>string</td>
<td>使用您在Bibox交易所申请的apisecret对整个请求数据进行签名</td>
<td></td>
<td></td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>行为</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_login&#39;</td>
</tr>
</tbody></table>

<ul>
<li>3.签名方法</li>
</ul>

<p>1.定义参数对象param，需要用到apikey</p>

<p>let apikey = &#39;thisisyourapikey&#39;; </p>

<p>let param = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;
   };</p>

<p>2.格式化参数对象param，得到strParam</p>

<p>let strParam = JSON.stringify(param);</p>

<p>3.用apikey的密码secret对strParam进行HmacMD5签名，得到签名结果sign</p>

<p>let CryptoJS = require(&quot;crypto-js&quot;);</p>

<p>let secret = &#39;c708ac3e70d115ec29efbee197330627d7edf842&#39;;</p>

<p>let sign = CryptoJS.HmacMD5(strParam, secret).toString();  </p>

<p>4.生成订阅参数 wsparam</p>

<p>let wsparam = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;,
      &quot;sign&quot;: sign,
    };</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"订阅成功"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>4.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>&quot;订阅成功&quot; 代表订阅成功</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='32'>32.订阅用户数据解析资产</h2>
<ul>
<li>1.关键字段</li>
</ul>

<p>contract_assets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_assets"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"ff"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"b"</span><span class="p">:</span><span class="s2">"218884.3026"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"u"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mc"</span><span class="p">:</span><span class="s2">"93265.8573"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mf"</span><span class="p">:</span><span class="s2">"486.3048"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fc"</span><span class="p">:</span><span class="s2">"0"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>b</td>
<td>可用余额</td>
</tr>
<tr>
<td>c</td>
<td>币种符号</td>
</tr>
<tr>
<td>u</td>
<td>用户id</td>
</tr>
<tr>
<td>ff</td>
<td>逐仓冻结资金</td>
</tr>
<tr>
<td>fc</td>
<td>全仓冻结资金</td>
</tr>
<tr>
<td>mf</td>
<td>逐仓冻结保证金</td>
</tr>
<tr>
<td>mc</td>
<td>全仓冻结保证金</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='33'>33.订阅用户数据解析仓位</h2>
<ul>
<li>1.关键字段</li>
</ul>

<p>contract_order</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_order"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"pt"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"l"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pa"</span><span class="p">:</span><span class="s2">"1.0006153088"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pf"</span><span class="p">:</span><span class="s2">"1.0006148393"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"md"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"lc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mg"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"hc"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="s2">"0"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>l</td>
<td>杠杆</td>
</tr>
<tr>
<td>sd</td>
<td>仓位方向: 1, 多仓 2 , 空仓</td>
</tr>
<tr>
<td>pa</td>
<td>告警价格</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>pf</td>
<td>爆仓价格</td>
</tr>
<tr>
<td>md</td>
<td>仓位模式: 1全仓, 2逐仓</td>
</tr>
<tr>
<td>lc</td>
<td>可平仓位价值</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>mg</td>
<td>保证金</td>
</tr>
<tr>
<td>hc</td>
<td>仓位价值 = 合约张数X合约面值</td>
</tr>
<tr>
<td>po</td>
<td>开仓价格</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='34'>34.订阅用户数据解析挂单</h2>
<ul>
<li>1.关键字段</li>
</ul>

<p>contract_pending</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_pending"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"eq"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11692"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tif"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"r"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602750121093</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fz"</span><span class="p">:</span><span class="s2">"0.0000086786"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"432108069716000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602750117690"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"po"</span><span class="p">:</span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>eq</td>
<td>成交数量</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>q</td>
<td>下单数量</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>r</td>
<td>失败原因</td>
</tr>
<tr>
<td>s</td>
<td>订单状态</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>fz</td>
<td>挂单冻结</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='35'>35.订阅用户数据解析成交明细</h2>
<ul>
<li>1.关键字段</li>
</ul>

<p>contract_detail</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_detail"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"oi"</span><span class="p">:</span><span class="s2">"432108069715999"</span><span class="p">,</span><span class="err">//挂单id</span><span class="w">
                </span><span class="nl">"ui"</span><span class="p">:</span><span class="s2">"100006"</span><span class="p">,</span><span class="err">//用户id</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842648855"</span><span class="p">,</span><span class="err">//成交id</span><span class="w">
                </span><span class="nl">"coi"</span><span class="p">:</span><span class="s2">"1602750117684"</span><span class="p">,</span><span class="err">//自定义id</span><span class="w">
                </span><span class="nl">"pi"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//交易对</span><span class="w">
                </span><span class="nl">"sd"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">//</span><span class="w">
                </span><span class="nl">"s"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="err">//</span><span class="w">
                </span><span class="nl">"ot"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"of"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">挂单来源</span><span class="w">
                </span><span class="nl">"q"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"11692"</span><span class="p">,</span><span class="err">//挂单价格</span><span class="w">
                </span><span class="nl">"dp"</span><span class="p">:</span><span class="s2">"10655"</span><span class="p">,</span><span class="err">//成交价格</span><span class="w">
                </span><span class="nl">"ep"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"f"</span><span class="p">:</span><span class="s2">"0.0000000657"</span><span class="p">,</span><span class="err">//手续费</span><span class="w">
                </span><span class="nl">"fb"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//bix抵扣</span><span class="w">
                </span><span class="nl">"fb0"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="err">//优惠券抵扣</span><span class="w">
                </span><span class="nl">"im"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//是否是maker</span><span class="w">
                </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1602750121093</span><span class="p">,</span><span class="w"> </span><span class="err">//成交时间</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>oi</td>
<td>订单id</td>
</tr>
<tr>
<td>ui</td>
<td>用户id</td>
</tr>
<tr>
<td>id</td>
<td>明细id</td>
</tr>
<tr>
<td>coi</td>
<td>用户自定义订单id</td>
</tr>
<tr>
<td>pi</td>
<td>交易对</td>
</tr>
<tr>
<td>sd</td>
<td>下单方向</td>
</tr>
<tr>
<td>of</td>
<td>订单来源</td>
</tr>
<tr>
<td>p</td>
<td>下单价格</td>
</tr>
<tr>
<td>dp</td>
<td>成交价格</td>
</tr>
<tr>
<td>f</td>
<td>手续费</td>
</tr>
<tr>
<td>fb0</td>
<td>优惠券抵扣</td>
</tr>
<tr>
<td>fb</td>
<td>bix抵扣</td>
</tr>
<tr>
<td>im</td>
<td>是否是maker</td>
</tr>
<tr>
<td>t</td>
<td>下单时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h2 id='36'>36.订阅用户数据解析持仓被动变化信息</h2>
<ul>
<li>1.关键字段</li>
</ul>

<p>contract_deal_log</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_deal_log"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842654296"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">变化id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">100006</span><span class="p">,</span><span class="err">//用户id</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="err">//变化类型，</span><span class="mi">1</span><span class="err">开仓，</span><span class="mi">2</span><span class="err">平仓，</span><span class="mi">3</span><span class="err">减仓降低风险等级</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="err">爆仓清空仓位</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="err">ADL</span><span class="w">
                </span><span class="nl">"mode"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//仓位模式</span><span class="w"> </span><span class="mi">1</span><span class="err">全仓，</span><span class="mi">2</span><span class="err">逐仓</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="err">//交易对</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11247.6"</span><span class="p">,</span><span class="err">//参考价格</span><span class="w">
                </span><span class="nl">"hold_dx"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="err">//持仓变化量</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">仓位方向，</span><span class="mi">1</span><span class="err">多仓，</span><span class="mi">2</span><span class="err">空仓</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1602755131000</span><span class="p">,</span><span class="w"> </span><span class="err">//变化时间</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.返回字段</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>变化id</td>
</tr>
<tr>
<td>user_id</td>
<td>用户id</td>
</tr>
<tr>
<td>type</td>
<td>变化类型，1开仓，2平仓，3减仓降低风险等级, 4爆仓清空仓位, 5ADL</td>
</tr>
<tr>
<td>mode</td>
<td>仓位模式 1全仓，2逐仓</td>
</tr>
<tr>
<td>pair</td>
<td>交易对</td>
</tr>
<tr>
<td>price</td>
<td>参考价格</td>
</tr>
<tr>
<td>hold_dx</td>
<td>持仓变化量</td>
</tr>
<tr>
<td>order_side</td>
<td>仓位方向，1多仓，2空仓</td>
</tr>
<tr>
<td>time</td>
<td>变化时间</td>
</tr>
<tr>
<td>其它字段</td>
<td>忽略</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1><h2 id='e08c1d4f9a'>错误码</h2>
<table><thead>
<tr>
<th>Code</th>
<th>描述</th>
<th>Msg</th>
</tr>
</thead><tbody>
<tr>
<td>2003</td>
<td>Cookie 失效</td>
<td>Cookie expired</td>
</tr>
<tr>
<td>2033</td>
<td>操作失败！订单已完成或已撤销</td>
<td>Operation failed! Order completed or canceled</td>
</tr>
<tr>
<td>2034</td>
<td>操作失败！请检查参数是否正确</td>
<td>Operation failed! Please check parameter</td>
</tr>
<tr>
<td>2040</td>
<td>操作失败！没有该订单</td>
<td>Operation failed! No record</td>
</tr>
<tr>
<td>2064</td>
<td>订单撤销中，不能再次撤销</td>
<td>Canceling. Unable to cancel again</td>
</tr>
<tr>
<td>2065</td>
<td>委托价格设置过高，请重新设置价格</td>
<td>Precatory price is exorbitant, please reset</td>
</tr>
<tr>
<td>2066</td>
<td>委托价格设置过低，请重新设置价格</td>
<td>Precatory price is low , please reset</td>
</tr>
<tr>
<td>2067</td>
<td>暂不支持市价单</td>
<td>Limit Order Only</td>
</tr>
<tr>
<td>2068</td>
<td>下单数量不能低于0.0001</td>
<td>Min Amount:0.0001</td>
</tr>
<tr>
<td>2069</td>
<td>市价单无法撤销</td>
<td>Market order can not be canceled</td>
</tr>
<tr>
<td>2078</td>
<td>下单价格非法</td>
<td>unvalid order price</td>
</tr>
<tr>
<td>2085</td>
<td>币种最小下单数量限制</td>
<td>the trade amount is low</td>
</tr>
<tr>
<td>2086</td>
<td>账户资产异常,限制下单</td>
<td>Abnormal account assets, trade is forbiden</td>
</tr>
<tr>
<td>2091</td>
<td>请求过于频繁，请稍后再试</td>
<td>request is too frequency, please try again later</td>
</tr>
<tr>
<td>2092</td>
<td>币种最小下单金额限制</td>
<td>Minimum amount not met</td>
</tr>
<tr>
<td>3000</td>
<td>请求参数错误</td>
<td>Requested parameter incorrect</td>
</tr>
<tr>
<td>3002</td>
<td>参数不能为空</td>
<td>Parameter cannot be null</td>
</tr>
<tr>
<td>3009</td>
<td>推送订阅channel不合法</td>
<td>Illegal subscription channel</td>
</tr>
<tr>
<td>3010</td>
<td>websocket连接异常</td>
<td>websocket connection error</td>
</tr>
<tr>
<td>3011</td>
<td>接口不支持apikey请求方式</td>
<td>Illegal subscribe event</td>
</tr>
<tr>
<td>3012</td>
<td>apikey无效</td>
<td>Interface does not support apikey request method</td>
</tr>
<tr>
<td>3016</td>
<td>交易对错误</td>
<td>Invalid apikey</td>
</tr>
<tr>
<td>3017</td>
<td>推送订阅event不合法</td>
<td>Trading pair error</td>
</tr>
<tr>
<td>3024</td>
<td>apikey权限不足</td>
<td>apikey authorization insufficient</td>
</tr>
<tr>
<td>3025</td>
<td>apikey签名验证失败</td>
<td>apikey signature verification failed</td>
</tr>
<tr>
<td>3026</td>
<td>apikey ip受限制</td>
<td>apikey ip is restricted</td>
</tr>
<tr>
<td>3027</td>
<td>账户没有apikey</td>
<td>No apikey in your account</td>
</tr>
<tr>
<td>3028</td>
<td>账户apikey数量超过了限制数量</td>
<td>Account apikey has exceeded the limit amount</td>
</tr>
<tr>
<td>3029</td>
<td>apikey允许ip数量超过了限制数量</td>
<td>apikey ip has exceeded the limit amount</td>
</tr>
<tr>
<td>3033</td>
<td>查询类请求限制一个cmd</td>
<td>query allow only one cmd</td>
</tr>
<tr>
<td>3034</td>
<td>最大cmd个数限制</td>
<td>maxinum cmds</td>
</tr>
<tr>
<td>3035</td>
<td>cmd请求个数限制</td>
<td>too many cmds</td>
</tr>
<tr>
<td>4000</td>
<td>当前网络连接不稳定，请稍候重试</td>
<td>the network is unstable now, please try again later</td>
</tr>
<tr>
<td>4003</td>
<td>服务器繁忙，请稍后再试</td>
<td>The server is busy, please try again later</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
      <script>
        const lang_btn = document.getElementById('lang_box');
        const btn_spot = document.getElementById('btn_spot');
        const btn_contract = document.getElementById('btn_contract');
        const btn_contract_coin = document.getElementById('btn_contract_coin')
        const btn_v1 = document.getElementById('btn_v1')

        const url = GetUrlRelativePath();

        if(url.indexOf('en') != -1){
          //英文

          lang_btn.innerHTML = '中文';
          btn_spot.innerHTML = 'Spot';
          btn_contract_coin.innerHTML = 'ContractCoin';
          btn_contract.innerHTML = 'Contract USDT';
          btn_v1.innerHTML = 'Use V1 API?';

          lang_btn.href = url.replace('en/', 'zh/');
          btn_spot.href = btn_spot.href.replace('zh/', 'en/');
          btn_contract_coin.href = btn_contract_coin.href.replace('zh/', 'en/');
          btn_contract.href = btn_contract.href.replace('zh/', 'en/');

        }else{
          //中文
          lang_btn.innerHTML = 'English';
          btn_spot.innerHTML = '现货';
          btn_contract_coin.innerHTML = '币本位永续合约';
          btn_contract.innerHTML = 'U本位永续合约';
          btn_v1.innerHTML = '使用v1版本API';

          lang_btn.href = url.replace('zh/', 'en/');
          btn_spot.href = btn_spot.href.replace('en/', 'zh/');
          btn_contract_coin.href = btn_contract_coin.href.replace('en/', 'zh/');
          btn_contract.href = btn_contract.href.replace('en/', 'zh/');
        }

        if(location.href.indexOf('v3/spot/') > 0){
          btn_spot.className = 'current';
          btn_contract_coin.className = '';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/bc/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = 'current';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/bu/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = '';
          btn_contract.className = 'current';
        }

        lang_btn.style.display = 'block';
        function GetUrlRelativePath(){
          let url = document.location.toString();
          let arrUrl = url.split("//");
          let start = arrUrl[1].indexOf("/");
          let relUrl = arrUrl[1].substring(start);
          if(relUrl.indexOf("?") != -1){
            relUrl = relUrl.split("?")[0];
          }
          if(relUrl.indexOf("#") != -1){
            relUrl = relUrl.split("#")[0];
          }
          return relUrl;
    　　}
      </script>
</html>
