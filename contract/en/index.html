
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bibox API documentation(v3)</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-1df89a6c.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-628c1a7f.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <header>
      <div class="flex_box">
        <img src="images/logo-5720d610.png" class="logo" alt="" />
        <div class="nav_box">
          <span class="nav_cell nav_tab">
            <a href="/v3/spot/zh/" id="btn_spot">现货</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/contract/zh/" id="btn_contract">U本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="/v3/bc/zh/" id="btn_contract_coin">币本位永续合约</a>
          </span>
          <span class="nav_cell nav_tab">
            <a href="https://biboxcom.github.io/zh-hans/" id="btn_v1">Use V1 Api?</a>
          </span>
        </div>
      </div>
      <a href="/v3/spot/en/" class="lang" id="lang_box">English</a>
    </header>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#usdt-based-contract" class="toc-h1 toc-link" data-title="USDT-based contract">USDT-based contract</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-signature-interface-request-method" class="toc-h2 toc-link" data-title="1.Signature interface request method">1.Signature interface request method</a>
                  </li>
                  <li>
                    <a href="#2-fund-transfer-in" class="toc-h2 toc-link" data-title="2.Fund transfer in">2.Fund transfer in</a>
                  </li>
                  <li>
                    <a href="#3-query-assets" class="toc-h2 toc-link" data-title="3.Query assets">3.Query assets</a>
                  </li>
                  <li>
                    <a href="#4-query-single-position-information" class="toc-h2 toc-link" data-title="4.Query single position information">4.Query single position information</a>
                  </li>
                  <li>
                    <a href="#5-query-all-position-information" class="toc-h2 toc-link" data-title="5.Query all position information">5.Query all position information</a>
                  </li>
                  <li>
                    <a href="#6-query-unfilled-orders" class="toc-h2 toc-link" data-title="6.Query unfilled orders">6.Query unfilled orders</a>
                  </li>
                  <li>
                    <a href="#7-place-order" class="toc-h2 toc-link" data-title="7.Place order">7.Place order</a>
                  </li>
                  <li>
                    <a href="#8-batch-place-order" class="toc-h2 toc-link" data-title="8.Batch place order">8.Batch place order</a>
                  </li>
                  <li>
                    <a href="#9-cancel-order" class="toc-h2 toc-link" data-title="9.Cancel order">9.Cancel order</a>
                  </li>
                  <li>
                    <a href="#10-cancel-multiple-orders" class="toc-h2 toc-link" data-title="10.Cancel multiple orders">10.Cancel multiple orders</a>
                  </li>
                  <li>
                    <a href="#11-cancel-1000-orders" class="toc-h2 toc-link" data-title="11.Cancel 1000 orders">11.Cancel 1000 orders</a>
                  </li>
                  <li>
                    <a href="#12-cancel-order-through-client_oid" class="toc-h2 toc-link" data-title="12.Cancel order through client_oid">12.Cancel order through client_oid</a>
                  </li>
                  <li>
                    <a href="#13-adjust-leverage" class="toc-h2 toc-link" data-title="13.Adjust leverage">13.Adjust leverage</a>
                  </li>
                  <li>
                    <a href="#14-adjust-margin" class="toc-h2 toc-link" data-title="14.Adjust margin">14.Adjust margin</a>
                  </li>
                  <li>
                    <a href="#15-query-market-deals" class="toc-h2 toc-link" data-title="15.Query market deals">15.Query market deals</a>
                  </li>
                  <li>
                    <a href="#16-query-order-by-order-id" class="toc-h2 toc-link" data-title="16.Query order by order id">16.Query order by order id</a>
                  </li>
                  <li>
                    <a href="#17-query-pending-order-by-client_oid" class="toc-h2 toc-link" data-title="17.Query pending order by client_oid">17.Query pending order by client_oid</a>
                  </li>
                  <li>
                    <a href="#18-query-order-by-client_oid" class="toc-h2 toc-link" data-title="18.Query order by client_oid">18.Query order by client_oid</a>
                  </li>
                  <li>
                    <a href="#19-query-position-change-records" class="toc-h2 toc-link" data-title="19.Query position change records">19.Query position change records</a>
                  </li>
                  <li>
                    <a href="#20-qeury-trade-details" class="toc-h2 toc-link" data-title="20.Qeury trade details">20.Qeury trade details</a>
                  </li>
                  <li>
                    <a href="#21-query-contract-value" class="toc-h2 toc-link" data-title="21.Query contract value">21.Query contract value</a>
                  </li>
                  <li>
                    <a href="#22-query-contract-config" class="toc-h2 toc-link" data-title="22.Query contract config">22.Query contract config</a>
                  </li>
                  <li>
                    <a href="#23-query-single-order-quantity-limit" class="toc-h2 toc-link" data-title="23.Query single order quantity limit">23.Query single order quantity limit</a>
                  </li>
                  <li>
                    <a href="#24-query-current-fund-rate" class="toc-h2 toc-link" data-title="24.Query current fund rate">24.Query current fund rate</a>
                  </li>
                  <li>
                    <a href="#25-query-k-line" class="toc-h2 toc-link" data-title="25.Query k-line">25.Query k-line</a>
                  </li>
                  <li>
                    <a href="#26-query-market-depth" class="toc-h2 toc-link" data-title="26.Query market depth">26.Query market depth</a>
                  </li>
                  <li>
                    <a href="#27-subscription-to-k-line" class="toc-h2 toc-link" data-title="27.Subscription to k-line">27.Subscription to k-line</a>
                  </li>
                  <li>
                    <a href="#28-subscription-to-market" class="toc-h2 toc-link" data-title="28.Subscription to market">28.Subscription to market</a>
                  </li>
                  <li>
                    <a href="#29-subscription-to-market-depth" class="toc-h2 toc-link" data-title="29.Subscription to Market depth">29.Subscription to Market depth</a>
                  </li>
                  <li>
                    <a href="#30-subscription-to-deals-detail" class="toc-h2 toc-link" data-title="30.Subscription to deals detail">30.Subscription to deals detail</a>
                  </li>
                  <li>
                    <a href="#31-subscription-to-ticker" class="toc-h2 toc-link" data-title="31.Subscription to ticker">31.Subscription to ticker</a>
                  </li>
                  <li>
                    <a href="#32-subscription-to-user-data" class="toc-h2 toc-link" data-title="32.Subscription to user data">32.Subscription to user data</a>
                  </li>
                  <li>
                    <a href="#33-get-assets-from-subscribed-user-data" class="toc-h2 toc-link" data-title="33.Get assets from subscribed user data">33.Get assets from subscribed user data</a>
                  </li>
                  <li>
                    <a href="#33-get-position-from-subscribed-user-data" class="toc-h2 toc-link" data-title="33.Get position from subscribed user data">33.Get position from subscribed user data</a>
                  </li>
                  <li>
                    <a href="#35-get-order-from-subscribed-user-data" class="toc-h2 toc-link" data-title="35.Get order from subscribed user data">35.Get order from subscribed user data</a>
                  </li>
                  <li>
                    <a href="#36-get-deals-detail-from-subscribed-user-data" class="toc-h2 toc-link" data-title="36.Get deals detail from subscribed user data">36.Get deals detail from subscribed user data</a>
                  </li>
                  <li>
                    <a href="#37-get-changes-in-positions-from-subscribed-user-data" class="toc-h2 toc-link" data-title="37.Get changes in positions from subscribed user data">37.Get changes in positions from subscribed user data</a>
                  </li>
                  <li>
                    <a href="#38-subscription-to-index-price" class="toc-h2 toc-link" data-title="38.Subscription to index price">38.Subscription to index price</a>
                  </li>
                  <li>
                    <a href="#39-subscription-to-price-limit" class="toc-h2 toc-link" data-title="39.Subscription to price limit">39.Subscription to price limit</a>
                  </li>
                  <li>
                    <a href="#40-fund-transfer-out" class="toc-h2 toc-link" data-title="40.Fund transfer out">40.Fund transfer out</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.bibox.com'>Start trading</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='usdt-based-contract'>USDT-based contract</h1>
<p>This is the USDT-based contract api document.</p>
<h2 id='1-signature-interface-request-method'>1.Signature interface request method</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.Current timestamp</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.Requested parameters</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.Formatting parameters</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.This is the string that needs to be signed</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.Signed result</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3/assets/transfer/cbc</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.Formatting parameters</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.response data</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li><p>1.Get current timestamp</p></li>
<li><p>2.Understand the parameter param required by the interface request, and format the parameter to get strParam</p></li>
<li><p>3.Generate the string strToSign that needs to be signed</p></li>
<li><p>4.Use apikey&#39;s secret to sign the string strToSign that needs to be signed with HmacMD5</p></li>
<li><p>5.When requesting, set the following fields of http headers</p></li>
</ul>

<table><thead>
<tr>
<th>Field name</th>
<th>Field type</th>
<th>Field description</th>
<th>Field value</th>
</tr>
</thead><tbody>
<tr>
<td>content-type</td>
<td>string</td>
<td></td>
<td>&#39;application/json&#39;</td>
</tr>
<tr>
<td>bibox-api-key</td>
<td>string</td>
<td>your apikey</td>
<td></td>
</tr>
<tr>
<td>bibox-timestamp</td>
<td>long</td>
<td>Current timestamp，expressed in milliseconds</td>
<td>timestamp</td>
</tr>
<tr>
<td>bibox-api-sign</td>
<td>string</td>
<td>Signature result</td>
<td>sign</td>
</tr>
</tbody></table>

<ul>
<li><p>6.When requesting, set http body as the formatted request parameter strParam </p></li>
<li><p>7.The return value contains the field state, 0 means success, and other error codes, means failure. Successful results will have a corresponding field result, and failed results will have a corresponding field msg.</p></li>
</ul>
<h2 id='2-fund-transfer-in'>2.Fund transfer in</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.Current timestamp</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.Requested parameters</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.Formatting parameters</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.This is the string that needs to be signed</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.Signed result</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/transfer/in</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.Formatting parameters</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.response data</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/transfer/in</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>true</td>
<td>integer</td>
<td>USDT amount</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='3-query-assets'>3.Query assets</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/assets</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/assets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"97.2378"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Available</span><span class="w"> </span><span class="err">Balance</span><span class="w">
        </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"1.7326"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Frozen</span><span class="w"> </span><span class="err">amount</span><span class="w">
        </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-2.4327"</span><span class="p">,</span><span class="w"> 
        </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"1.7326"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"imargin"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="s2">"98.8397"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"BTCValue"</span><span class="p">:</span><span class="s2">"0.02528321"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"CNYValue"</span><span class="p">:</span><span class="s2">"664.61"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"USDValue"</span><span class="p">:</span><span class="s2">"98.84"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"floatProfitBTC"</span><span class="p">:</span><span class="s2">"-0.00003344"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"floatProfit"</span><span class="p">:</span><span class="s2">"-0.1308"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profitBTC"</span><span class="p">:</span><span class="s2">"-0.00062226"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"freezeBTC"</span><span class="p">:</span><span class="s2">"0.00044322"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>balance</td>
<td>Available Balance</td>
</tr>
<tr>
<td>freeze</td>
<td>Frozen amount</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='4-query-single-position-information'>4.Query single position information</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/order</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/order</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
        </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">positions</span><span class="w">
        </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"1.5612"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">margin</span><span class="w">
        </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-2.4995"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3903.0450"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">开仓开仓均价均价</span><span class="w">
        </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">opening</span><span class="w"> </span><span class="err">direction:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
        </span><span class="nl">"price_force"</span><span class="p">:</span><span class="s2">"3961.5907"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Liquidation</span><span class="w"> </span><span class="err">price</span><span class="w">
        </span><span class="nl">"floatProfit"</span><span class="p">:</span><span class="s2">"-0.1376"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"leverage"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span><span class="w"> </span><span class="err">Cross</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="err">others:</span><span class="w"> </span><span class="err">leverage</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">fixed</span><span class="w"> </span><span class="err">position</span><span class="w">
        </span><span class="nl">"icontract_up"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">orders</span><span class="w">
        </span><span class="nl">"icontract_down"</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">orders</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>contract</td>
<td>Number of open positions</td>
</tr>
<tr>
<td>margin</td>
<td>margin</td>
</tr>
<tr>
<td>price</td>
<td>Average open price</td>
</tr>
<tr>
<td>order_side</td>
<td>Position opening direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>price_force</td>
<td>Liquidation price</td>
</tr>
<tr>
<td>leverage</td>
<td>0: Cross position, others: leverage of fixed position</td>
</tr>
<tr>
<td>icontract_up</td>
<td>Number of open long and pending orders</td>
</tr>
<tr>
<td>icontract_down</td>
<td>Number of open short and pending orders</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='5-query-all-position-information'>5.Query all position information</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderAll</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/orderAll</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">positions</span><span class="w">
            </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"1.5612"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">margin</span><span class="w">
            </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-2.4995"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3903.0450"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Position</span><span class="w"> </span><span class="err">opening</span><span class="w"> </span><span class="err">direction:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
            </span><span class="nl">"price_force"</span><span class="p">:</span><span class="s2">"3961.5907"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Liquidation</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"floatProfit"</span><span class="p">:</span><span class="s2">"-0.1376"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"leverage"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span><span class="w"> </span><span class="err">Cross</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="err">others:</span><span class="w"> </span><span class="err">leverage</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">fixed</span><span class="w"> </span><span class="err">position</span><span class="w">
            </span><span class="nl">"icontract_up"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">orders</span><span class="w">
            </span><span class="nl">"icontract_down"</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">orders</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>contract</td>
<td>Number of open positions</td>
</tr>
<tr>
<td>margin</td>
<td>margin</td>
</tr>
<tr>
<td>price</td>
<td>Average open price</td>
</tr>
<tr>
<td>order_side</td>
<td>Position opening direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>price_force</td>
<td>Liquidation price</td>
</tr>
<tr>
<td>leverage</td>
<td>0: Cross position, others: leverage of fixed position</td>
</tr>
<tr>
<td>icontract_up</td>
<td>Number of open long and pending orders</td>
</tr>
<tr>
<td>icontract_down</td>
<td>Number of open short and pending orders</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='6-query-unfilled-orders'>6.Query unfilled orders</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderPending</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/orderPending</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>page number</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>10,20, ...</td>
</tr>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">491168</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">direction:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">fully</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="w"> </span><span class="err">system</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="err">&gt;=</span><span class="mi">100</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">failed</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"136.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> 
                </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">quantity</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">contracts</span><span class="w"> </span><span class="err">traded</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-02-20T02:01:46.000Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2019-02-20T02:01:46.000Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">489453</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3850.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-02-20T01:51:41.000Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2019-02-20T01:51:42.000Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>Pending order direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>contract</td>
<td>order quantity</td>
</tr>
<tr>
<td>status</td>
<td>0,1 not traded, 2 partly traded, 3 fully traded, 4 partly canceled, 5 completely canceled, 6,7 system canceled, &gt;=100 order failed</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract_deal</td>
<td>quantity of contracts traded</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='7-place-order'>7.Place order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/open</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_type</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">3929.97</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_from</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage</span><span class="dl">"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">cross_leverage</span><span class="dl">"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">order_side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_oid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">'</span><span class="s1">123456789</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/open</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_type</td>
<td>true</td>
<td>integer</td>
<td>order type</td>
<td></td>
<td>1: market price, 2: limit price</td>
</tr>
<tr>
<td>leverage</td>
<td>true</td>
<td>integer</td>
<td>leverage</td>
<td></td>
<td>Cross:0,Fixed:1,2,...</td>
</tr>
<tr>
<td>cross_leverage</td>
<td>false</td>
<td>integer</td>
<td>Cross position leverage</td>
<td>25</td>
<td>1,2,...50</td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>order side</td>
<td></td>
<td>1: open long, 2: open short</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>string</td>
<td>target price</td>
<td></td>
<td>&gt; 0</td>
</tr>
<tr>
<td>contract</td>
<td>true</td>
<td>string</td>
<td>order quantiry</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>order_from</td>
<td>true</td>
<td>integer</td>
<td>6</td>
<td></td>
<td>6</td>
</tr>
<tr>
<td>client_oid</td>
<td>false</td>
<td>Long</td>
<td>client order id</td>
<td></td>
<td>&gt; 0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="mi">17592186044786</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> 
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>result</td>
<td>order id</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='8-batch-place-order'>8.Batch place order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/openBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4ETH_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">leverage</span><span class="dl">"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">cross_leverage</span><span class="dl">"</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">order_side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="mi">140</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">client_oid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">'</span><span class="s1">123456787</span><span class="dl">'</span> 
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">order_side</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="mf">140.5</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">client_oid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">'</span><span class="s1">123456788</span><span class="dl">'</span> 
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/openBatch</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>leverage</td>
<td>true</td>
<td>integer</td>
<td>leverage</td>
<td></td>
<td>Cross:0,Fixed:1,2,...</td>
</tr>
<tr>
<td>cross_leverage</td>
<td>false</td>
<td>integer</td>
<td>Cross position leverage</td>
<td>25</td>
<td>1,2,...50</td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>order side</td>
<td></td>
<td>1: open long, 2: open short</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>string</td>
<td>target price</td>
<td></td>
<td>&gt; 0</td>
</tr>
<tr>
<td>contract</td>
<td>true</td>
<td>string</td>
<td>order quantiry</td>
<td></td>
<td>1,2, ...</td>
</tr>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>client_oid</td>
<td>false</td>
<td>Long</td>
<td>client order id</td>
<td></td>
<td>&gt; 0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w"> 
            </span><span class="err">code:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">means</span><span class="w"> </span><span class="err">success</span><span class="p">,</span><span class="w"> </span><span class="err">otherwise</span><span class="w"> </span><span class="err">means</span><span class="w"> </span><span class="err">failure</span><span class="w">
            </span><span class="err">id:</span><span class="w"> </span><span class="err">'</span><span class="mi">17592186044787</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="err">msg:</span><span class="w"> </span><span class="err">''</span><span class="p">,</span><span class="w">
            </span><span class="err">client_oid:</span><span class="w"> </span><span class="err">'</span><span class="mi">123456787</span><span class="err">'</span><span class="w"> 
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w"> 
            </span><span class="err">code:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="err">id:</span><span class="w"> </span><span class="err">'</span><span class="mi">17592186044790</span><span class="err">'</span><span class="p">,</span><span class="w">
            </span><span class="err">msg:</span><span class="w"> </span><span class="err">''</span><span class="p">,</span><span class="w">
            </span><span class="err">client_oid:</span><span class="w"> </span><span class="err">'</span><span class="mi">123456788</span><span class="err">'</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>code</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='9-cancel-order'>9.Cancel order</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/close</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">574954</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/close</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='10-cancel-multiple-orders'>10.Cancel multiple orders</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/closeBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_ids</span><span class="dl">"</span><span class="p">:[</span>
        <span class="dl">"</span><span class="s2">574953</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">574954</span><span class="dl">"</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/closeBatch</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>string</td>
<td>Array of order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='11-cancel-1000-orders'>11.Cancel 1000 orders</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/closeAll</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/closeAll</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='12-cancel-order-through-client_oid'>12.Cancel order through client_oid</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/closeBatchClientOid</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">clientIds</span><span class="dl">"</span><span class="p">:[</span>
        <span class="dl">"</span><span class="s2">1588819328619</span><span class="dl">"</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/closeBatchClientOid</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>clientIds</td>
<td>true</td>
<td>string array</td>
<td>Array of client_oid</td>
<td></td>
<td>Limit 50 orders</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='13-adjust-leverage'>13.Adjust leverage</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/changeLeverage</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
     <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">leverage</span><span class="dl">"</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">cross</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/changeLeverage</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>leverage</td>
<td>true</td>
<td>integer</td>
<td>leverage</td>
<td></td>
<td>Cross:0,Fixed:1,2,...</td>
</tr>
<tr>
<td>cross</td>
<td>true</td>
<td>integer</td>
<td>is it cross position</td>
<td></td>
<td>0 fixed position, 1 cross pofition</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='14-adjust-margin'>14.Adjust margin</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/order/changeMargin</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4ETH_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">margin</span><span class="dl">"</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/order/changeMargin</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT, ...</td>
</tr>
<tr>
<td>margin</td>
<td>true</td>
<td>integer</td>
<td>margin</td>
<td></td>
<td>The absolute value must be greater than or equal to 0.5</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='15-query-market-deals'>15.Query market deals</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/deals?pair=4ETH_USDT&amp;&amp;size=10</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>String</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>1,2,...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">          </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="err">buy</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">sell</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">75</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">quantity</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"182.7500"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1565861520000</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>1buy 2 sell</td>
</tr>
<tr>
<td>contract</td>
<td>quantity</td>
</tr>
<tr>
<td>price</td>
<td>deal price</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='16-query-order-by-order-id'>16.Query order by order id</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderPendingByIDs</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">ids</span><span class="dl">"</span><span class="p">:[</span>
        <span class="dl">"</span><span class="s2">491168</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">2</span><span class="dl">"</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/orderPendingByIDs</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>true</td>
<td>string array</td>
<td>order id</td>
<td></td>
<td>limit 50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">491168</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">direction:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">fully</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="w"> </span><span class="err">system</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="err">&gt;=</span><span class="mi">100</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">failed</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"136.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">quantity</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">contracts</span><span class="w"> </span><span class="err">traded</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-02-20T02:01:46.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2019-02-20T02:01:46.000Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3622.0000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"3622.0000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-02-15T13:10:27.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2019-02-15T13:10:45.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>Pending order direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>contract</td>
<td>order quantity</td>
</tr>
<tr>
<td>status</td>
<td>0,1 not traded, 2 partly traded, 3 fully traded, 4 partly canceled, 5 completely canceled, 6,7 system canceled, &gt;=100 order failed</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract_deal</td>
<td>quantity of contracts traded</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='17-query-pending-order-by-client_oid'>17.Query pending order by client_oid</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/ordersDetailByClientIds</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">clientIds</span><span class="dl">"</span><span class="p">:[</span>
        <span class="dl">"</span><span class="s2">1588819328619</span><span class="dl">"</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/ordersDetailByClientIds</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>clientIds</td>
<td>true</td>
<td>string array</td>
<td>Array of client_oid</td>
<td></td>
<td>limit 50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"71468256443234"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101051</span><span class="p">,</span><span class="w">
            </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1588819328619"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9486.0000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9485.9900"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="mi">1588819336186</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="mi">1588819336186</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>Pending order direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>contract</td>
<td>order quantity</td>
</tr>
<tr>
<td>status</td>
<td>0,1 not traded, 2 partly traded, 3 fully traded, 4 partly canceled, 5 completely canceled, 6,7 system canceled, &gt;=100 order failed</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract_deal</td>
<td>quantity of contracts traded</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='18-query-order-by-client_oid'>18.Query order by client_oid</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderPendingByClientIds</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">clientIds</span><span class="dl">"</span><span class="p">:[</span>
        <span class="dl">"</span><span class="s2">1588819328619</span><span class="dl">"</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/orderPendingByClientIds</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>clientIds</td>
<td>true</td>
<td>string array</td>
<td>Array of client_oid</td>
<td></td>
<td>limit 50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">71468256443234</span><span class="p">,</span><span class="w">
            </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1588819328619"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_from"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9486.0000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9485.9973"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-07T02:42:16.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-07T03:02:24.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>Pending order direction: 1 open long, 2 open short</td>
</tr>
<tr>
<td>contract</td>
<td>order quantity</td>
</tr>
<tr>
<td>status</td>
<td>0,1 not traded, 2 partly traded, 3 fully traded, 4 partly canceled, 5 completely canceled, 6,7 system canceled, &gt;=100 order failed</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract_deal</td>
<td>quantity of contracts traded</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='19-query-position-change-records'>19.Query position change records</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">4BTC_USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">begin_time</span><span class="dl">"</span><span class="p">:</span><span class="mi">1550971541000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_time</span><span class="dl">"</span><span class="p">:</span><span class="mi">1550977541000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/cquery/query/orderList</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>String</td>
<td>contract pair</td>
<td></td>
<td>4BTC_USDT,4ETH_USDT,...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>page number</td>
<td></td>
<td>1,2,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>return size</td>
<td></td>
<td>1,2,...</td>
</tr>
<tr>
<td>begin_time</td>
<td>false</td>
<td>integer</td>
<td>Starting time</td>
<td></td>
<td></td>
</tr>
<tr>
<td>end_time</td>
<td>false</td>
<td>integer</td>
<td>End time</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>integer</td>
<td>Record type</td>
<td></td>
<td>1 open position, 2 close position, 3 liquidate position, 4 lighten position</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">236343</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w"> 
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">liquidate</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">lighten</span><span class="w"> </span><span class="err">position</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"price_open"</span><span class="p">:</span><span class="s2">"3999.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3964.5800"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"3999.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantiry</span><span class="w">
                </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"0.6884"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">profit</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-02-23T17:07:31.000Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>type</td>
<td>1 open position, 2 close position, 3 liquidate position, 4 lighten position</td>
</tr>
<tr>
<td>order_side</td>
<td>1 open long, 2 open short</td>
</tr>
<tr>
<td>price_open</td>
<td>target price</td>
</tr>
<tr>
<td>price</td>
<td>Average open price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract</td>
<td>order quantiry</td>
</tr>
<tr>
<td>profit</td>
<td>profit</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='20-qeury-trade-details'>20.Qeury trade details</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/cquery/query/orderDetailByID</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">58</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// order id</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">//format param</span>
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//sign cmds</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span><span class="c1">//parameter string</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/query/orderDetailByID</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>String</td>
<td>order id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                 </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span><span class="w">                  </span><span class="err">//</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">      </span><span class="err">//coin</span><span class="w"> </span><span class="err">symbol</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">              </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantiry</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">webpage</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Android</span><span class="p">,</span><span class="mi">3</span><span class="err">ios，</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">apikey，</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2019-08-13T08:22:25.000Z"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2019-08-13T08:22:26.000Z"</span><span class="p">,</span><span class="w"> 
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"7029.9700"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"is_cancel"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">             </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">normal</span><span class="w"> </span><span class="err">order;</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="err">cancelled</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">              </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span><span class="w"> </span><span class="err">taker;</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="w"> </span><span class="err">maker;</span><span class="w"> 
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="w">             </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">price；</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>id</td>
<td>record id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>1 open long, 2 open short</td>
</tr>
<tr>
<td>contract</td>
<td>order quantiry</td>
</tr>
<tr>
<td>order_from</td>
<td>1 webpage, 2 Android,3ios， 6 apikey，</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>is_cancel</td>
<td>0 normal order; 1: cancelled</td>
</tr>
<tr>
<td>is_maker</td>
<td>0: taker; 1: maker;</td>
</tr>
<tr>
<td>order_type</td>
<td>1 market price； 2 limit price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='21-query-contract-value'>21.Query contract value</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/contractValue</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">  
            </span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"0.0100000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="w">
        </span><span class="p">},</span><span class="w">
       </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>value</td>
<td>value</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='22-query-contract-config'>22.Query contract config</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/contractConfig</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"cross_leverage"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">Cross</span><span class="w"> </span><span class="err">position</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">leverage</span><span class="w">
        </span><span class="nl">"leverage_max"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Maximum</span><span class="w"> </span><span class="err">leverage</span><span class="w">
        </span><span class="nl">"margin_rate_force"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Liquidation</span><span class="w"> </span><span class="err">rate</span><span class="w">
        </span><span class="nl">"night_fee_rate"</span><span class="p">:</span><span class="s2">"0.0006"</span><span class="p">,</span><span class="w"> 
        </span><span class="nl">"hold_limit"</span><span class="p">:{</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">Maximum</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">positions</span><span class="w">
            </span><span class="nl">"BTC"</span><span class="p">:</span><span class="mi">5000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ETH"</span><span class="p">:</span><span class="mi">150000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"EOS"</span><span class="p">:</span><span class="mi">50000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"LTC"</span><span class="p">:</span><span class="mi">35000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"BCH"</span><span class="p">:</span><span class="mi">100000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>cross_leverage</td>
<td>Cross position default leverage</td>
</tr>
<tr>
<td>leverage_max</td>
<td>Maximum leverage</td>
</tr>
<tr>
<td>margin_rate_force</td>
<td>Liquidation rate</td>
</tr>
<tr>
<td>hold_limit</td>
<td>Maximum number of positions</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='23-query-single-order-quantity-limit'>23.Query single order quantity limit</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/openLimit</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"BTC"</span><span class="p">:</span><span class="mi">5000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ETH"</span><span class="p">:</span><span class="mi">75000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"EOS"</span><span class="p">:</span><span class="mi">75000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"LTC"</span><span class="p">:</span><span class="mi">15000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"BCH"</span><span class="p">:</span><span class="mi">15000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='24-query-current-fund-rate'>24.Query current fund rate</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v3.1/cquery/lastPremiumIndex</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">164391</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"0.0007000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fund_rate_up"</span><span class="p">:</span><span class="s2">"0.0005000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"fund_rate_down"</span><span class="p">:</span><span class="s2">"-0.0005000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-02-27T00:00:00.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-02-27T00:00:00.000Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>fund_rate_up</td>
<td>fund rate</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='25-query-k-line'>25.Query k-line</h2>
<ul>
<li><p>1.Request path</p></li>
<li><p>GET https://api.bibox.com/v2/mdata/kline?pair=4BTC_USDT&amp;period=1min&amp;size=10</p></li>
<li><p>2.Request parameter</p></li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>k-line period</td>
<td></td>
<td>&#39;1min&#39;, &#39;3min&#39;, &#39;5min&#39;, &#39;15min&#39;, &#39;30min&#39;, &#39;1hour&#39;, &#39;2hour&#39;, &#39;4hour&#39;, &#39;6hour&#39;, &#39;12hour&#39;, &#39;day&#39;, &#39;week&#39;</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>return size</td>
<td>1000</td>
<td>1-1000</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1602680580000</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Timestamp</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Opening</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Highest</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Lowest</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"10666.00000000"</span><span class="p">,</span><span class="err">//</span><span class="w"> </span><span class="err">Closing</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="err">//</span><span class="w"> </span><span class="err">Volume</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"kline"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>Value means success, otherwise means failure</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp</td>
</tr>
<tr>
<td>open</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>Closing price</td>
</tr>
<tr>
<td>vol</td>
<td>Volume</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='26-query-market-depth'>26.Query market depth</h2>
<ul>
<li>1.Request path</li>
</ul>

<p>GET https://api.bibox.com/v2/mdata/depth?pair=4BTC_USDT&amp;size=10</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>return size</td>
<td>200</td>
<td>1-200</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1602669350668</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="err">//Seller</span><span class="w"> </span><span class="err">Depth</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">Market</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="err">//Buyer</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">depth</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54054"</span><span class="p">,</span><span class="err">//Order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"10666"</span><span class="err">//Pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cmd"</span><span class="p">:</span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ver"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>Value means success, otherwise means failure</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>update_time</td>
<td>time</td>
</tr>
<tr>
<td>asks</td>
<td>Seller Depth of Market</td>
</tr>
<tr>
<td>bids</td>
<td>Buyer market depth</td>
</tr>
<tr>
<td>volume</td>
<td>Order quantity</td>
</tr>
<tr>
<td>price</td>
<td>Pending order price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='27-subscription-to-k-line'>27.Subscription to k-line</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_kline_1min</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>k-line period</td>
<td></td>
<td>1min, 5min, 15min, 30min, 1hour, 2hour, 4hour, 6hour, 12hour, day, week</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_kline_&#39; + ${period}</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>8</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_kline_1min"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603969980000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13131.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.40000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"43045.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1603970040000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13136.80000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13136.30000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"13136.70000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"5561.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>k-line start time</td>
</tr>
<tr>
<td>count</td>
<td>Deal number</td>
</tr>
<tr>
<td>open</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>Closing price</td>
</tr>
<tr>
<td>vol</td>
<td>Volume(Contract value)</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='28-subscription-to-market'>28.Subscription to market</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_ALL_ALL_market</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_market&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"4BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"13669.5900"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13860.2500"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13626.4000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"change"</span><span class="p">:</span><span class="s2">"-90.6300"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"-0.65%"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vol24H"</span><span class="p">:</span><span class="s2">"21492"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"295494126.56"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_cny"</span><span class="p">:</span><span class="s2">"90971.0974"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"base_last_cny"</span><span class="p">:</span><span class="s2">"90971.09739152"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"high_cny"</span><span class="p">:</span><span class="s2">"92239.9394"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"low_cny"</span><span class="p">:</span><span class="s2">"90683.6680"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"13669.5900"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"high_usd"</span><span class="p">:</span><span class="s2">"13860.2500"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"low_usd"</span><span class="p">:</span><span class="s2">"13626.4000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>pair id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>coin symbol：4BTC、4ETH...</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>currency symbol</td>
</tr>
<tr>
<td>last</td>
<td>last price</td>
</tr>
<tr>
<td>high</td>
<td>24h Highest price</td>
</tr>
<tr>
<td>low</td>
<td>24h Lowest price</td>
</tr>
<tr>
<td>change</td>
<td>24h change</td>
</tr>
<tr>
<td>percent</td>
<td>24h Quote change</td>
</tr>
<tr>
<td>vol24H</td>
<td>24h volume</td>
</tr>
<tr>
<td>amount</td>
<td>24h turnover(USDT)</td>
</tr>
<tr>
<td>last_cny</td>
<td>last cny price</td>
</tr>
<tr>
<td>high_cny</td>
<td>Highest cny price</td>
</tr>
<tr>
<td>low_cny</td>
<td>Lowest cny price</td>
</tr>
<tr>
<td>last_usd</td>
<td>last usd price</td>
</tr>
<tr>
<td>high_usd</td>
<td>Highest usd price</td>
</tr>
<tr>
<td>low_usd</td>
<td>Lowest usd price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='29-subscription-to-market-depth'>29.Subscription to Market depth</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_depth</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// depth</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">ver</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_depth_&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ver</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>3</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1604021669643</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seq"</span><span class="p">:</span><span class="mi">4544162</span><span class="p">,</span><span class="w">
    </span><span class="nl">"add"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"del"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"mod"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"54000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.4"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"17012"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13574.3"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>last</td>
<td>last price</td>
</tr>
<tr>
<td>last_cny</td>
<td>last cny price</td>
</tr>
<tr>
<td>last_usd</td>
<td>last usd price</td>
</tr>
<tr>
<td>high</td>
<td>24hHighest price</td>
</tr>
<tr>
<td>low</td>
<td>24hLowest price</td>
</tr>
<tr>
<td>buy</td>
<td>Latest bid price</td>
</tr>
<tr>
<td>buy_amount</td>
<td>Latest bid amount</td>
</tr>
<tr>
<td>sell</td>
<td>Latest ask price</td>
</tr>
<tr>
<td>sell_amount</td>
<td>Latest ask amount</td>
</tr>
<tr>
<td>vol</td>
<td>24hDeal amount</td>
</tr>
<tr>
<td>percent</td>
<td>24h Quote change</td>
</tr>
<tr>
<td>timestamp</td>
<td>Timestamp</td>
</tr>
<tr>
<td>base_last_cny</td>
<td>Latest cny price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='30-subscription-to-deals-detail'>30.Subscription to deals detail</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_deals</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_deals&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"13570.600000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"800.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604022129044</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>price</td>
<td>deal price</td>
</tr>
<tr>
<td>amount</td>
<td>Deal amount</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp</td>
</tr>
<tr>
<td>side</td>
<td>deal side, 1 buy, 2 sell</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='31-subscription-to-ticker'>31.Subscription to ticker</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_4BTC_USDT_ticker</span><span class="dl">'</span><span class="p">,</span> 
                <span class="na">binary</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>pair</td>
<td></td>
<td>4BTC_USDT, 4ETH_USDT, ...</td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_&#39; + ${pair} + &#39;_ticker&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>0</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_4BTC_USDT_ticker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"13593.50"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_cny"</span><span class="p">:</span><span class="s2">"91076.20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13700.300000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"12986.000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy"</span><span class="p">:</span><span class="s2">"13593.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="s2">"48375"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell"</span><span class="p">:</span><span class="s2">"13593.6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="s2">"56625"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"155811681.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+2.44%"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1604022393028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_last_cny"</span><span class="p">:</span><span class="s2">"91076.20000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>last</td>
<td>last price</td>
</tr>
<tr>
<td>last_cny</td>
<td>last cny price</td>
</tr>
<tr>
<td>last_usd</td>
<td>last usd price</td>
</tr>
<tr>
<td>high</td>
<td>24h Highest price</td>
</tr>
<tr>
<td>low</td>
<td>24h Lowest price</td>
</tr>
<tr>
<td>buy</td>
<td>Latest bid price</td>
</tr>
<tr>
<td>buy_amount</td>
<td>Latest bid amount</td>
</tr>
<tr>
<td>sell</td>
<td>Latest ask price</td>
</tr>
<tr>
<td>sell_amount</td>
<td>Latest ask amount</td>
</tr>
<tr>
<td>vol</td>
<td>24h Deal amount</td>
</tr>
<tr>
<td>percent</td>
<td>24h Quote change</td>
</tr>
<tr>
<td>timestamp</td>
<td>Timestamp</td>
</tr>
<tr>
<td>base_last_cny</td>
<td>Latest cny price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='32-subscription-to-user-data'>32.Subscription to user data</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 1.Request path</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// your apikey</span>
<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// Define the parameter object param, need to use apikey</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// Format the parameter object param, get strParam</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strParam</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// Use apikey's secret to sign strParam with HmacMD5, and get the signature result sign</span>
<span class="kd">let</span> <span class="nx">wsparam</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// 2.Request parameter</span>
    <span class="dl">"</span><span class="s2">apikey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bibox_sub_spot_ALL_ALL_login</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">addChannel</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">sign</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
<span class="p">};</span>


<span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>

    <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span> <span class="o">&amp;&amp;</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">manu ping</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">wsparam</span><span class="p">));</span>

    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">incoming</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// response data</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jdata</span><span class="p">.</span><span class="nx">ping</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">init</span><span class="p">();</span>


</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>true</td>
<td>string</td>
<td>your apikey</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>string</td>
<td>sign</td>
<td></td>
<td></td>
</tr>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_login&#39;</td>
</tr>
</tbody></table>

<ul>
<li>3.Signature method</li>
</ul>

<p>1.Define the parameter object param, need to use apikey</p>

<p>let apikey = &#39;thisisyourapikey&#39;; </p>

<p>let param = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;
   };</p>

<p>2.Format the parameter object param, get strParam</p>

<p>let strParam = JSON.stringify(param);</p>

<p>3.Use apikey&#39;s secret to sign strParam with HmacMD5, and get the signature result sign</p>

<p>let CryptoJS = require(&quot;crypto-js&quot;);</p>

<p>let secret = &#39;c708ac3e70d115ec29efbee197330627d7edf842&#39;;</p>

<p>let sign = CryptoJS.HmacMD5(strParam, secret).toString();  </p>

<p>4.Generate subscription parameters wsparam</p>

<p>let wsparam = {
     &quot;apikey&quot;: apikey,
     &quot;channel&quot;: &quot;bibox_sub_spot_ALL_ALL_login&quot;,
     &quot;event&quot;: &quot;addChannel&quot;,
      &quot;sign&quot;: sign,
    };</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"订阅成功"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>4.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>&quot;订阅成功&quot; means subscription success</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='33-get-assets-from-subscribed-user-data'>33.Get assets from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_assets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_assets"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">10101010</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"99.1823"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Available</span><span class="w"> </span><span class="err">Balance</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.7899"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Frozen</span><span class="w"> </span><span class="err">amount</span><span class="w">
                </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-3.6816"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"0.7899"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">margin</span><span class="w">
                </span><span class="nl">"imargin"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Order</span><span class="w"> </span><span class="err">frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balance</td>
<td>Available Balance</td>
</tr>
<tr>
<td>freeze</td>
<td>Frozen amount</td>
</tr>
<tr>
<td>margin</td>
<td>margin</td>
</tr>
<tr>
<td>imargin</td>
<td>Order frozen funds</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='33-get-position-from-subscribed-user-data'>33.Get position from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_order</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_order"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">10101010</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">position</span><span class="w"> </span><span class="err">side，</span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"3949.7850"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_up"</span><span class="p">:</span><span class="s2">"4009.0200"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">price</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w"> </span><span class="err">orders</span><span class="w">
                </span><span class="nl">"price_down"</span><span class="p">:</span><span class="s2">"3946.0300"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">price</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w"> </span><span class="err">orders</span><span class="w">
                </span><span class="nl">"fee_rate"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">positions</span><span class="w">
                </span><span class="nl">"margin"</span><span class="p">:</span><span class="s2">"1.5799"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">margin</span><span class="w">
                </span><span class="nl">"imargin"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Orders</span><span class="w"> </span><span class="err">frozen</span><span class="w"> </span><span class="err">funds</span><span class="w">
                </span><span class="nl">"icontract_up"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="w">
                </span><span class="nl">"icontract_down"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"leverage"</span><span class="p">:</span><span class="s2">"50"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">leverage，</span><span class="mi">0</span><span class="w"> </span><span class="err">means</span><span class="w"> </span><span class="err">cross</span><span class="w"> </span><span class="err">position</span><span class="w">
                </span><span class="nl">"price_force"</span><span class="p">:</span><span class="s2">"4009.0318"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Liquidation</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_alert"</span><span class="p">:</span><span class="s2">"3989.2829"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Alert</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"-3.5492"</span><span class="w"> 
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>position side，1 open long, 2 open short</td>
</tr>
<tr>
<td>price</td>
<td>Average open price</td>
</tr>
<tr>
<td>price_up</td>
<td>Average price of pending open long orders</td>
</tr>
<tr>
<td>price_down</td>
<td>Average price of pending open short orders</td>
</tr>
<tr>
<td>contract</td>
<td>Number of open positions</td>
</tr>
<tr>
<td>margin</td>
<td>margin</td>
</tr>
<tr>
<td>imargin</td>
<td>Orders frozen funds</td>
</tr>
<tr>
<td>icontract_up</td>
<td>The number of pending order open long</td>
</tr>
<tr>
<td>icontract_down</td>
<td>The number of pending order open short</td>
</tr>
<tr>
<td>leverage</td>
<td>leverage，0 means cross position</td>
</tr>
<tr>
<td>price_force</td>
<td>Liquidation price</td>
</tr>
<tr>
<td>price_alert</td>
<td>Alert price</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='35-get-order-from-subscribed-user-data'>35.Get order from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_pending</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_pending"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"628754"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">10101010</span><span class="p">,</span><span class="w">
                </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1589868279533"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"4009.0200"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">fully</span><span class="w"> </span><span class="err">traded</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">partly</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">completely</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="w"> </span><span class="err">system</span><span class="w"> </span><span class="err">canceled</span><span class="p">,</span><span class="w"> </span><span class="err">&gt;=</span><span class="mi">100</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">failed</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"3952.5600"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"contract_deal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1550671734000</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="mi">1550671734000</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>1 open long, 2 open short</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>contract</td>
<td>order quantity</td>
</tr>
<tr>
<td>status</td>
<td>0,1 not traded, 2 partly traded, 3 fully traded, 4 partly canceled, 5 completely canceled, 6,7 system canceled, &gt;=100 order failed</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract_deal</td>
<td>deal quantity</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='36-get-deals-detail-from-subscribed-user-data'>36.Get deals detail from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_detail</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"contract_detail"</span><span class="p">:{</span><span class="w">
                </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"628754"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">id</span><span class="w">
                </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">10101010</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4BTC_USDT"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">contract</span><span class="w"> </span><span class="err">pair</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">long</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">short</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">price</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contract"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">quantity</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"4009.0200"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"3952.5600"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">maker</span><span class="w">
                </span><span class="nl">"is_cancel"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">cancel</span><span class="w"> </span><span class="err">order</span><span class="w">
                </span><span class="nl">"is_persist"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"force_sub"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1550671735000</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">time</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="mi">1550671735000</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>order id</td>
</tr>
<tr>
<td>pair</td>
<td>contract pair</td>
</tr>
<tr>
<td>order_side</td>
<td>1 open long, 2 open short</td>
</tr>
<tr>
<td>order_type</td>
<td>1 market price, 2 limit price</td>
</tr>
<tr>
<td>contract</td>
<td>deal quantity</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>is_maker</td>
<td>is maker</td>
</tr>
<tr>
<td>is_cancel</td>
<td>is cancel order</td>
</tr>
<tr>
<td>createdAt</td>
<td>time</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='37-get-changes-in-positions-from-subscribed-user-data'>37.Get changes in positions from subscribed user data</h2>
<ul>
<li>1.Key field</li>
</ul>

<p>contract_deal_log</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"bibox_sub_spot_ALL_ALL_login"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"binary"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data_type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"contract_deal_log"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906842966183"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"user_id"</span><span class="p">:</span><span class="mi">10040000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">close</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">position</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">lighten</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">position</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"4ETH_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_open"</span><span class="p">:</span><span class="s2">"182.2091272149"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">open</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"181.1900"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">target</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"price_deal"</span><span class="p">:</span><span class="s2">"181.1900"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">price</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deal</span><span class="w"> </span><span class="err">quantity，May</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">negative</span><span class="w">
            </span><span class="nl">"profit"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">profit</span><span class="w">
            </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.0011"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w">
            </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">side</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1572855008209</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="mi">1572855008209</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>1 open a position, 2 close a position, 3 close a position, 4 lighten a position</td>
</tr>
<tr>
<td>price_open</td>
<td>Average open price</td>
</tr>
<tr>
<td>price</td>
<td>target price</td>
</tr>
<tr>
<td>price_deal</td>
<td>deal price</td>
</tr>
<tr>
<td>contract</td>
<td>deal quantity，May be negative</td>
</tr>
<tr>
<td>profit</td>
<td>profit</td>
</tr>
<tr>
<td>fee</td>
<td>fee</td>
</tr>
<tr>
<td>order_side</td>
<td>order side，1 open long, 2 open short</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='38-subscription-to-index-price'>38.Subscription to index price</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_ALL_ALL_indexMarket</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_indexMarket&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>1</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">146</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"3955.1652"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"3993.1069"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"3880.6072"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="s2">"+6.1701"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+0.16%"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol24H"</span><span class="p">:</span><span class="s2">"43109"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"169654088.16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_cny"</span><span class="p">:</span><span class="s2">"26588.2733"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"base_last_cny"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high_cny"</span><span class="p">:</span><span class="s2">"26843.3333"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low_cny"</span><span class="p">:</span><span class="s2">"26087.0635"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"3955.1651"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high_usd"</span><span class="p">:</span><span class="s2">"3993.1068"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low_usd"</span><span class="p">:</span><span class="s2">"3880.6072"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>coin_symbol</td>
<td>coin symbol</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>currency symbol</td>
</tr>
<tr>
<td>last</td>
<td>last price</td>
</tr>
<tr>
<td>last_cny</td>
<td>last cny price</td>
</tr>
<tr>
<td>last_usd</td>
<td>last usd price</td>
</tr>
<tr>
<td>high</td>
<td>24h Highest price</td>
</tr>
<tr>
<td>low</td>
<td>24h Lowest price</td>
</tr>
<tr>
<td>buy</td>
<td>last bid price</td>
</tr>
<tr>
<td>buy_amount</td>
<td>last bid amount</td>
</tr>
<tr>
<td>sell</td>
<td>last ask price</td>
</tr>
<tr>
<td>sell_amount</td>
<td>last ask amount)</td>
</tr>
<tr>
<td>percent</td>
<td>24h Quote change</td>
</tr>
<tr>
<td>timestamp</td>
<td>timestamp</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='39-subscription-to-price-limit'>39.Subscription to price limit</h2>
<blockquote>
<p>Example</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">biboxws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.bibox.me</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log(Buffer.from(data, 'base64'))</span>
        <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">_decodeMsg catch</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_consumerMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">binary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">biboxws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bibox_sub_spot_ALL_ALL_contractPriceLimit</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">binary</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Response data</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jdata</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">jdata</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_consumerMsg</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Subscription path</li>
</ul>

<p>wss://push.bibox.me</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>event</td>
<td>true</td>
<td>string</td>
<td>event</td>
<td></td>
<td>&#39;addChannel&#39;</td>
</tr>
<tr>
<td>channel</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;bibox_sub_spot_ALL_ALL_contractPriceLimit&#39;</td>
</tr>
<tr>
<td>binary</td>
<td>true</td>
<td>int</td>
<td></td>
<td></td>
<td>1</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"4BTC_USDT"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"min_up"</span><span class="p">:</span><span class="s2">"2964.4562"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_up"</span><span class="p">:</span><span class="s2">"4090.9496"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min_down"</span><span class="p">:</span><span class="s2">"3814.2670"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_down"</span><span class="p">:</span><span class="s2">"4940.7603"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"market_up"</span><span class="p">:</span><span class="s2">"4090.9496"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"market_down"</span><span class="p">:</span><span class="s2">"3814.2670"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"4ETH_USDT"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"min_up"</span><span class="p">:</span><span class="s2">"110.3038"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_up"</span><span class="p">:</span><span class="s2">"155.1606"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min_down"</span><span class="p">:</span><span class="s2">"138.9828"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_down"</span><span class="p">:</span><span class="s2">"183.8396"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"market_up"</span><span class="p">:</span><span class="s2">"155.1606"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"market_down"</span><span class="p">:</span><span class="s2">"138.9828"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>min_up</td>
<td>Open long minimum price</td>
</tr>
<tr>
<td>max_up</td>
<td>Open long maximum price</td>
</tr>
<tr>
<td>min_down</td>
<td>Open short minimum price</td>
</tr>
<tr>
<td>max_down</td>
<td>Open short maximum price</td>
</tr>
<tr>
<td>market_up</td>
<td>Open long maximum market price</td>
</tr>
<tr>
<td>market_down</td>
<td>Open short minimum market price</td>
</tr>
<tr>
<td>binary</td>
<td>0 means the data is not compressed, 1 means the data is compressed</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h2 id='40-fund-transfer-out'>40.Fund transfer out</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.Current timestamp</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.Requested parameters</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.01</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.Formatting parameters</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.This is the string that needs to be signed</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//your apikey secret</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">//4.Signed result</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.bibox.com/v3.1/ctrade/transfer/out</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span><span class="c1">//Request path</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span><span class="c1">//Request method</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="c1">//5.Set request headers</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">bibox-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> <span class="c1">// 6.Formatting parameters</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// 7.response data</span>

    <span class="p">});</span>

</code></pre></div>
<ul>
<li>1.Request path</li>
</ul>

<p>POST https://api.bibox.com/v3.1/ctrade/transfer/out</p>

<ul>
<li>2.Request parameter</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Necessary or not</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
<th>Value Range</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>true</td>
<td>integer</td>
<td>USDT amount</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">success</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.Response field description</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 means success, otherwise means failure</td>
</tr>
<tr>
<td>Other fields</td>
<td>ignore</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>3000</td>
<td>请求参数错误</td>
</tr>
<tr>
<td>3001</td>
<td>暂不支持该币种</td>
</tr>
<tr>
<td>3002</td>
<td>参数不能为空</td>
</tr>
<tr>
<td>3003</td>
<td>请输入Google验证码</td>
</tr>
<tr>
<td>3004</td>
<td>请输入短信验证码</td>
</tr>
<tr>
<td>3005</td>
<td>找不到该币种的父链</td>
</tr>
<tr>
<td>3006</td>
<td>没有配置该币种的服务器地址</td>
</tr>
<tr>
<td>3007</td>
<td>该币种不是erc20</td>
</tr>
<tr>
<td>3008</td>
<td>该币种没有合约地址</td>
</tr>
<tr>
<td>3009</td>
<td>推送订阅channel不合法</td>
</tr>
<tr>
<td>3010</td>
<td>websocket连接异常</td>
</tr>
<tr>
<td>3011</td>
<td>接口不支持apikey请求方式</td>
</tr>
<tr>
<td>3012</td>
<td>apikey无效</td>
</tr>
<tr>
<td>3013</td>
<td>该币种不是omni代币</td>
</tr>
<tr>
<td>3014</td>
<td>该币种没有propertyid</td>
</tr>
<tr>
<td>3015</td>
<td>程序内部错误</td>
</tr>
<tr>
<td>3016</td>
<td>交易对错误</td>
</tr>
<tr>
<td>3017</td>
<td>推送订阅event不合法</td>
</tr>
<tr>
<td>3018</td>
<td>查询可提现额度失败</td>
</tr>
<tr>
<td>3019</td>
<td>该币种未开启融资融币</td>
</tr>
<tr>
<td>3020</td>
<td>放款深度不足</td>
</tr>
<tr>
<td>3021</td>
<td>没有放款信息</td>
</tr>
<tr>
<td>3022</td>
<td>没有借款信息</td>
</tr>
<tr>
<td>3023</td>
<td>更新数据库失败</td>
</tr>
<tr>
<td>3024</td>
<td>apikey权限不足</td>
</tr>
<tr>
<td>3025</td>
<td>apikey签名验证失败</td>
</tr>
<tr>
<td>3026</td>
<td>apikey ip受限制</td>
</tr>
<tr>
<td>3027</td>
<td>账户没有apikey</td>
</tr>
<tr>
<td>3028</td>
<td>账户apikey数量超过了限制数量</td>
</tr>
<tr>
<td>3029</td>
<td>apikey允许ip数量超过了限制数量</td>
</tr>
<tr>
<td>3030</td>
<td>该Google验证码已经被使用过</td>
</tr>
<tr>
<td>3031</td>
<td>旧Google验证码已经被使用过</td>
</tr>
<tr>
<td>3032</td>
<td>没有可还的放贷单</td>
</tr>
<tr>
<td>3033</td>
<td>查询类请求只能有一个cmd</td>
</tr>
<tr>
<td>3034</td>
<td>最多cmd数限制</td>
</tr>
<tr>
<td>3035</td>
<td>cmd个数限制</td>
</tr>
<tr>
<td>3036</td>
<td>提现数量不能少于最小提现数</td>
</tr>
<tr>
<td>3037</td>
<td>账户资产异常</td>
</tr>
<tr>
<td>3038</td>
<td>qtum gethexaddress失败</td>
</tr>
<tr>
<td>3039</td>
<td>可锁仓量不足</td>
</tr>
<tr>
<td>3040</td>
<td>活动未开始</td>
</tr>
<tr>
<td>3041</td>
<td>暂不支持非压缩数据订阅</td>
</tr>
<tr>
<td>3042</td>
<td>最小数量限制</td>
</tr>
<tr>
<td>3043</td>
<td>不能包含特殊字符</td>
</tr>
<tr>
<td>3044</td>
<td>重复下单</td>
</tr>
<tr>
<td>3045</td>
<td>交易对订单数量限制</td>
</tr>
<tr>
<td>3046</td>
<td>交易对持仓数量限制</td>
</tr>
<tr>
<td>3047</td>
<td>invalid id, id must be string and length &gt; 10</td>
</tr>
<tr>
<td>3048</td>
<td>响应验签失败</td>
</tr>
<tr>
<td>3049</td>
<td>超出数量限制</td>
</tr>
<tr>
<td>3050</td>
<td>子账户名不能纯数字</td>
</tr>
<tr>
<td>3051</td>
<td>strategy order number reaches the limit of pair</td>
</tr>
<tr>
<td>3052</td>
<td>strategy order number reaches the limit of account</td>
</tr>
<tr>
<td>3053</td>
<td>子账户无法进行该操作</td>
</tr>
<tr>
<td>3100</td>
<td>不支持该币种</td>
</tr>
<tr>
<td>3101</td>
<td>不支持该交易对</td>
</tr>
<tr>
<td>3102</td>
<td>全仓不支持该操作</td>
</tr>
<tr>
<td>3103</td>
<td>没有持仓不支持该操作</td>
</tr>
<tr>
<td>3104</td>
<td>有持仓不支持该操作</td>
</tr>
<tr>
<td>3105</td>
<td>可减少保证金不足</td>
</tr>
<tr>
<td>3106</td>
<td>有挂单不支持该操作</td>
</tr>
<tr>
<td>3107</td>
<td>FOK撤单</td>
</tr>
<tr>
<td>3108</td>
<td>post only撤单</td>
</tr>
<tr>
<td>3109</td>
<td>爆仓触发撤单</td>
</tr>
<tr>
<td>3110</td>
<td>ADL触发撤单</td>
</tr>
<tr>
<td>3111</td>
<td>爆仓价变化导致平仓单撤单</td>
</tr>
<tr>
<td>3112</td>
<td>order side参数错误</td>
</tr>
<tr>
<td>3113</td>
<td>order type参数错误</td>
</tr>
<tr>
<td>3114</td>
<td>side参数错误</td>
</tr>
<tr>
<td>3115</td>
<td>margin保证金错误</td>
</tr>
<tr>
<td>3116</td>
<td>model参数错误</td>
</tr>
<tr>
<td>3117</td>
<td>leverage参数错误</td>
</tr>
<tr>
<td>3118</td>
<td>amount参数错误</td>
</tr>
<tr>
<td>3119</td>
<td>price参数错误</td>
</tr>
<tr>
<td>3120</td>
<td>client_oid重复</td>
</tr>
<tr>
<td>3121</td>
<td>self trade参数错误</td>
</tr>
<tr>
<td>3122</td>
<td>time in force参数错误</td>
</tr>
<tr>
<td>3123</td>
<td>visible quantity参数错误</td>
</tr>
<tr>
<td>3124</td>
<td>cancel after参数错误</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
      <script>
        const lang_btn = document.getElementById('lang_box');
        const btn_spot = document.getElementById('btn_spot');
        const btn_contract = document.getElementById('btn_contract');
        const btn_contract_coin = document.getElementById('btn_contract_coin')

        const url = GetUrlRelativePath();

        if(url.indexOf('en') != -1){
          //英文

          lang_btn.innerHTML = '中文';
          btn_spot.innerHTML = 'Spot';
          btn_contract_coin.innerHTML = 'ContractCoin';
          btn_contract.innerHTML = 'Contract USDT';

          lang_btn.href = url.replace('en/', 'zh/');
          btn_spot.href = btn_spot.href.replace('zh/', 'en/');
          btn_contract_coin.href = btn_contract_coin.href.replace('zh/', 'en/');
          btn_contract.href = btn_contract.href.replace('zh/', 'en/');

        }else{
          //中文
          lang_btn.innerHTML = 'English';
          btn_spot.innerHTML = '现货';
          btn_contract_coin.innerHTML = '币本位永续合约';
          btn_contract.innerHTML = 'U本位永续合约';

          lang_btn.href = url.replace('zh/', 'en/');
          btn_spot.href = btn_spot.href.replace('en/', 'zh/');
          btn_contract_coin.href = btn_contract_coin.href.replace('en/', 'zh/');
          btn_contract.href = btn_contract.href.replace('en/', 'zh/');
        }

        if(location.href.indexOf('v3/spot/') > 0){
          btn_spot.className = 'current';
          btn_contract_coin.className = '';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/bc/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = 'current';
          btn_contract.className = '';
        }
        else if(location.href.indexOf('v3/contract/') > 0){
          btn_spot.className = '';
          btn_contract_coin.className = '';
          btn_contract.className = 'current';
        }

        lang_btn.style.display = 'block';
        function GetUrlRelativePath(){
          let url = document.location.toString();
          let arrUrl = url.split("//");
          let start = arrUrl[1].indexOf("/");
          let relUrl = arrUrl[1].substring(start);
          if(relUrl.indexOf("?") != -1){
            relUrl = relUrl.split("?")[0];
          }
          if(relUrl.indexOf("#") != -1){
            relUrl = relUrl.split("#")[0];
          }
          return relUrl;
    　　}
      </script>
</html>
